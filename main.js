(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){var r=e.data,o=e.template,i=e.handleCardClick,a=e.handleAddLike,u=e.handleRemoveLike,c=e.handleDeleteButtonClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._template=o,this._card=this._getTemplate(),this._handleCardClick=i,this._handleAddLike=a,this._handleRemoveLike=u,this._handleDeleteButtonClick=c,this._userId=n,this._newCardImage=this._card.querySelector(".element__image"),this._cardLikeButton=this._card.querySelector(".element__like-button"),this._cardDeleteButton=this._card.querySelector(".element__delete-button"),this._likeCounter=this._card.querySelector(".element__like-label"),this.loadCard(r)}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._template).content.querySelector(".elements__list-item").cloneNode(!0)}},{key:"_setButtonsState",value:function(){this._setDeleteButtonState(),this._setLikeButtonState()}},{key:"_setLikeButtonState",value:function(){this._isLikedByUser?this._cardLikeButton.classList.add("element__like-button_active"):this._cardLikeButton.classList.remove("element__like-button_active"),this._likeCounter.textContent=this._likes.length}},{key:"_setDeleteButtonState",value:function(){this._userId!==this._ownerId&&this._cardDeleteButton.remove()}},{key:"loadCard",value:function(e){var t=this;this._title=e.name,this._image=e.link,this.cardId=e._id,this._ownerId=e.owner._id,this._likes=e.likes,this._isLikedByUser=this._likes.some((function(e){return e._id===t._userId})),this._setButtonsState()}},{key:"deleteCard",value:function(){this._card.remove(),this._card=null}},{key:"_setEventListeners",value:function(){var e=this;this._newCardImage.addEventListener("click",(function(){e._handleCardClick(e._title,e._image)})),this._cardLikeButton.addEventListener("click",(function(){e._isLikedByUser?e._handleRemoveLike(e):e._handleAddLike(e)})),this._cardDeleteButton.addEventListener("click",(function(){e._handleDeleteButtonClick(e)}))}},{key:"generateCard",value:function(){return this._setEventListeners(),this._newCardImage.src=this._image,this._card.querySelector(".element__title").textContent=this._title,this._newCardImage.alt=this._title,this._card}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._attributes=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},t),this._formElement=o,this._inputList=Array.from(this._formElement.querySelectorAll(this._attributes.inputSelector)),this._buttonElement=this._formElement.querySelector(this._attributes.submitButtonSelector)}var t,i;return t=e,(i=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._attributes.inputErrorClass),n.textContent=t,n.classList.add(this._attributes.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._attributes.inputErrorClass),t.classList.remove(this._attributes.errorClass),t.textContent=""}},{key:"_resetInputErrors",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._disableButton():(this._buttonElement.classList.remove(this._attributes.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_disableButton",value:function(){this._buttonElement.classList.add(this._attributes.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"resetFormValidation",value:function(){this._resetInputErrors(),this._disableButton()}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&o(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"render",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close-button"))&&e.close()}))}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=h(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},p.apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._handleFormSubmit=r,t._form=t._popup.querySelector(".edit-form"),t._inputList=t._form.querySelectorAll(".edit-form__item"),t._submitButton=t._form.querySelector(".edit-form__submit-button"),t._submitButtonText=t._submitButton.textContent,t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formInputValues={},this._inputList.forEach((function(t){e._formInputValues[t.name]=t.value})),this._formInputValues}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"showLoading",value:function(e){this._submitButton.textContent=e?"Сохранение...":this._submitButtonText}},{key:"close",value:function(){p(_(a.prototype),"close",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var e=this;p(_(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=w(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function O(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._popup=document.querySelector(e),t}return t=a,(n=[{key:"handleConfirmationSubmit",value:function(e){this._callbackSubmit=e}},{key:"open",value:function(e){g(E(a.prototype),"open",this).call(this),this._callbackArg=e}},{key:"setEventListeners",value:function(){var e=this;g(E(a.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(t){t.preventDefault(),e._callbackSubmit(e._callbackArg)}))}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=C(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},L.apply(this,arguments)}function C(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}function B(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=D(r);if(o){var n=D(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return B(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._popupImage=t._popup.querySelector(".popup__image"),t._popupImageCaption=t._popup.querySelector(".popup__image-caption"),t}return t=a,(n=[{key:"open",value:function(e,t){this._popupImage.src=t,this._popupImage.alt=e,this._popupImageCaption.textContent=e,L(D(a.prototype),"open",this).call(this)}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=function(){function e(t){var n=t.userProfileName,r=t.userProfileDescription,o=t.userProfileAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=n,this._profileDescription=r,this._profileAvatar=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,about:this._profileDescription.textContent,avatar:this._profileAvatar.src}}},{key:"setUserInfo",value:function(e){this._profileName.textContent=e.name,this._profileDescription.textContent=e.about}},{key:"setUserAvatar",value:function(e){this._profileAvatar.src=e.avatar,this._profileAvatar.alt=e.name}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._serverUrl=t.serverUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getUserInfoApi",value:function(){return fetch("".concat(this._serverUrl,"/users/me"),{headers:this._headers}).then(this._getResponseData)}},{key:"editPageUserInfo",value:function(e){return fetch("".concat(this._serverUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(T({},e))}).then(this._getResponseData)}},{key:"editUserAvatar",value:function(e){return fetch("".concat(this._serverUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(T({},e))}).then(this._getResponseData)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._serverUrl,"/cards"),{headers:this._headers}).then(this._getResponseData)}},{key:"addCard",value:function(e){return fetch("".concat(this._serverUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(T({},e))}).then(this._getResponseData)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._serverUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._getResponseData)}},{key:"addLike",value:function(e){return fetch("".concat(this._serverUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then(this._getResponseData)}},{key:"removeLike",value:function(e){return fetch("".concat(this._serverUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then(this._getResponseData)}}])&&V(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),N={formSelector:".edit-form",inputSelector:".edit-form__item",submitButtonSelector:".edit-form__submit-button",inactiveButtonClass:"edit-form__submit-button_disabled",inputErrorClass:"edit-form__item_state_error",errorClass:"edit-form__input-error_visible"},J=document.querySelector(".profile__edit-button"),H=document.querySelector(".profile__add-button"),M=document.querySelector(".profile__avatar-edit-button"),z=document.querySelector(".profile__name"),$=document.querySelector(".profile__description"),G=document.querySelector(".profile__avatar"),K=document.querySelector("#profile-edit-form"),Q=document.querySelector("#place-form"),W=document.querySelector("#avatar-edit-form");function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Y,Z=new F({serverUrl:"https://mesto.nomoreparties.co/v1/cohort-48",headers:{authorization:"5d2947c9-bb9f-4c7f-aef0-c89bfe848fc0","Content-Type":"application/json"}});Promise.all([Z.getUserInfoApi(),Z.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];Y=o,ee.setUserInfo(o),ee.setUserAvatar(o),ae.render(i)})).catch((function(e){console.log(e)}));var ee=new A({userProfileName:z,userProfileDescription:$,userProfileAvatar:G}),te=new b({popupSelector:".popup_type_profile-editing",handleFormSubmit:function(e){te.showLoading(!0),Z.editPageUserInfo(e).then((function(e){ee.setUserInfo(e),te.close()})).catch((function(e){console.log(e)})).finally((function(){te.showLoading(!1)}))}});te.setEventListeners();var ne=new b({popupSelector:".popup_type_avatar-editing",handleFormSubmit:function(e){ne.showLoading(!0),Z.editUserAvatar(e).then((function(e){ee.setUserAvatar(e),ne.close()})).catch((function(e){console.log(e)})).finally((function(){ne.showLoading(!1)}))}});ne.setEventListeners();var re=new R(".popup_type_image-opening");re.setEventListeners();var oe=new S(".popup_type_element-delete");oe.handleConfirmationSubmit((function(e){Z.deleteCard(e.cardId).then((function(){e.deleteCard(),oe.close()})).catch((function(e){console.log(e)}))})),oe.setEventListeners();var ie=function(e){return new t({data:e,template:"#template-for-element",handleCardClick:function(e,t){re.open(e,t)},handleAddLike:function(e){Z.addLike(e.cardId).then((function(t){e.loadCard(t)})).catch((function(e){console.log(e)}))},handleRemoveLike:function(e){Z.removeLike(e.cardId).then((function(t){e.loadCard(t)})).catch((function(e){console.log(e)}))},handleDeleteButtonClick:function(e){oe.open(e)}},Y._id).generateCard()},ae=new u({renderer:function(e){ae.addItem(ie(e))}},".elements__list"),ue=new b({popupSelector:".popup_type_element-add",handleFormSubmit:function(e){ue.showLoading(!0),Z.addCard(e).then((function(e){ae.addItem(ie(e)),ue.close()})).catch((function(e){console.log(e)})).finally((function(){ue.showLoading(!1)}))}});ue.setEventListeners();var ce=new i(N,K),se=new i(N,Q),le=new i(N,W);se.enableValidation(),ce.enableValidation(),le.enableValidation(),J.addEventListener("click",(function(){var e=ee.getUserInfo();ce.resetFormValidation(),te.setInputValues(e),te.open()})),M.addEventListener("click",(function(){var e=ee.getUserInfo();le.resetFormValidation(),ne.setInputValues(e),ne.open()})),H.addEventListener("click",(function(){se.resetFormValidation(),ue.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixHQUNKLElBR0hrQixHQUFhZCxvQkFJYixJQUFNZ0IsR0FBdUIsSUFBSXZKLEVBQWNzRyxFQUFzQlEsR0FDL0QwQyxHQUFxQixJQUFJeEosRUFBY3NHLEVBQXNCUyxHQUM3RDBDLEdBQXNCLElBQUl6SixFQUFjc0csRUFBc0JVLEdBR3BFd0MsR0FBbUJFLG1CQUNuQkgsR0FBcUJHLG1CQUNyQkQsR0FBb0JDLG1CQUdwQmxELEVBQXVCNUcsaUJBQWlCLFNBQVMsV0FDL0MsSUFBTStKLEVBQXFCbEMsR0FBWW1DLGNBQ3ZDTCxHQUFxQk0sc0JBQ3JCM0IsR0FBaUI0QixlQUFlSCxHQUNoQ3pCLEdBQWlCYyxNQUNsQixJQUVEdEMsRUFBc0I5RyxpQkFBaUIsU0FBUyxXQUM5QyxJQUFNbUssRUFBdUJ0QyxHQUFZbUMsY0FDekNILEdBQW9CSSxzQkFDcEJyQixHQUFnQnNCLGVBQWVDLEdBQy9CdkIsR0FBZ0JRLE1BQ2pCLElBRUR2QyxFQUFxQjdHLGlCQUFpQixTQUFTLFdBQzdDNEosR0FBbUJLLHNCQUNuQlIsR0FBYUwsTUFDZCxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoeyBkYXRhLCB0ZW1wbGF0ZSwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVBZGRMaWtlLCBoYW5kbGVSZW1vdmVMaWtlLCBoYW5kbGVEZWxldGVCdXR0b25DbGljayB9LCB1c2VySWQpIHtcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgIHRoaXMuX2NhcmQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVBZGRMaWtlID0gaGFuZGxlQWRkTGlrZTtcbiAgICB0aGlzLl9oYW5kbGVSZW1vdmVMaWtlID0gaGFuZGxlUmVtb3ZlTGlrZTtcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b25DbGljayA9IGhhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrO1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICB0aGlzLl9uZXdDYXJkSW1hZ2UgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpO1xuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZS1idXR0b24nKTtcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fZGVsZXRlLWJ1dHRvbicpO1xuICAgIHRoaXMuX2xpa2VDb3VudGVyID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZS1sYWJlbCcpO1xuXG4gICAgdGhpcy5sb2FkQ2FyZChkYXRhKTtcbiAgfVxuICAvL9C90LDQsdC+0YAg0YPRgdC70L7QstC90L4g0L/RgNC40LLQsNGC0L3Ri9GFINC80LXRgtC+0LTQvtCyINC60LvQsNGB0YHQsCBDYXJkXG5cbiAgLy/QvNC10YLQvtC0INC/0L7Qu9GD0YfQtdC90LjRjyDRiNCw0LHQu9C+0L3QsCDQutCw0YDRgtC+0YfQutC4INC/0YPRgtC10Lwg0LrQu9C+0L3QuNGA0L7QstCw0L3QuNGPXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlKVxuICAgICAgLmNvbnRlbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2xpc3QtaXRlbScpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICB9XG5cbiAgLy/QndCw0YHRgtGA0L7QudC60LAg0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDRjdC70LXQvNC10L3RgtC+0LIg0LrQvtGA0LfQuNC90Ysg0Lgg0LvQsNC50LrQsCDQvdCwINC60LDRgNGC0L7Rh9C60LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINC4INGB0YLQvtGA0L7QvdC90LjRhSDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQuVxuICBfc2V0QnV0dG9uc1N0YXRlKCkge1xuICAgIHRoaXMuX3NldERlbGV0ZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5fc2V0TGlrZUJ1dHRvblN0YXRlKCk7XG4gIH1cblxuICAvL9Cd0LDRgdGC0YDQvtC50LrQsCDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC70LDQudC60LAgKNCw0LrRgtC40LLQvdGL0Lkv0L3QtdCw0LrRgtC40LLQvdC+0LUg0YHQvtGB0YLQvtGP0L3QuNC1LCDRgdGH0LXRgtGH0LjQuiDQu9Cw0LnQutC+0LIpXG4gIF9zZXRMaWtlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2lzTGlrZWRCeVVzZXIpIHtcbiAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdlbGVtZW50X19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcbiAgICB9XG4gICAgdGhpcy5fbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG4gIH1cbiAvL9Cd0LDRgdGC0YDQvtC50LrQsCDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC60L7RgNC30LjQvdGLINGD0LTQsNC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuCAo0LTQu9GPINC00YDRg9Cz0LjRhSDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQuSlcbiAgX3NldERlbGV0ZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl91c2VySWQgIT09IHRoaXMuX293bmVySWQpIHtcbiAgICAgIHRoaXMuX2NhcmREZWxldGVCdXR0b24ucmVtb3ZlKCk7XG5cbiAgICB9XG4gIH1cblxuICAvL9C30LDQs9GA0YPQt9C60LAg0LTQsNC90L3Ri9GFINC60LDRgNGC0L7Rh9C60LggKNGB0LLQvtC50YHRgtCyKVxuICBsb2FkQ2FyZChkYXRhKSB7XG4gICAgdGhpcy5fdGl0bGUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5faW1hZ2UgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5jYXJkSWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuXG4gICAgLy/Qo9GB0LvQvtCy0LjQtSDQv9GA0Lgg0LrQvtGC0L7RgNC+0Lwg0YPRgdGC0LDQvdCw0LLQu9C40LLQsNC10YLRgdGPINCw0LrRgtC40LLQvdGL0Lkg0LfQvdCw0YfQvtC6INC70LDQudC60LBcbiAgICAvLyjQv9GA0Lgg0L3QsNC70LjRh9C40Lgg0YLQtdC60YPRidC10LPQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0LIg0LzQsNGB0YHQuNCy0LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C10Lkg0LvQsNC50LrQvdGD0LLRiNC40YUg0LrQsNGA0YLQvtGH0LrRgyDQsiDRgdCy0L7QudGB0YLQstC1INC60LDRgNGC0L7Rh9C60LggX2xpa2VzKVxuICAgIHRoaXMuX2lzTGlrZWRCeVVzZXIgPSB0aGlzLl9saWtlcy5zb21lKGFueVVzZXIgPT4ge1xuICAgICAgcmV0dXJuIGFueVVzZXIuX2lkID09PSB0aGlzLl91c2VySWQ7XG4gICAgfSlcbiAgICB0aGlzLl9zZXRCdXR0b25zU3RhdGUoKTtcbiAgfVxuXG4vLyDQvNC10YLQvtC0INGD0LTQsNC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuICBkZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZCA9IG51bGw7XG4gIH1cblxuICAvL9C80LXRgtC+0LQg0YPRgdGC0LDQvdC+0LLQutC4INGB0LvRg9GI0LDRgtC10LvQtdC5ICjQutC70LjQuiDQv9C+INC60LDRgNGC0LjQvdC60LUsINC70LDQudC60YMsINC60L3QvtC/0LrQtSDRg9C00LDQu9C10L3QuNGPKVxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbmV3Q2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX3RpdGxlLCB0aGlzLl9pbWFnZSk7XG4gICAgfSk7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5faXNMaWtlZEJ5VXNlcikge1xuICAgICAgICB0aGlzLl9oYW5kbGVSZW1vdmVMaWtlKHRoaXMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9oYW5kbGVBZGRMaWtlKHRoaXMpXG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrKHRoaXMpO1xuICAgIH0pO1xuICB9XG5cbiAgLy/Qv9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDRgdC+0LfQtNCw0L3QuNGPINC60LDRgNGC0L7Rh9C60LhcbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fbmV3Q2FyZEltYWdlLnNyYyA9IHRoaXMuX2ltYWdlO1xuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlJykudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcbiAgICB0aGlzLl9uZXdDYXJkSW1hZ2UuYWx0ID0gdGhpcy5fdGl0bGU7XG4gICAgLy8g0JLQtdGA0L3RkdC8INGN0LvQtdC80LXQvdGCINC90LDRgNGD0LbRg1xuICAgIHJldHVybiB0aGlzLl9jYXJkO1xuICB9XG59XG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihhdHRyaWJ1dGVzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2F0dHJpYnV0ZXMgPSB7IC4uLmF0dHJpYnV0ZXMgfTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9hdHRyaWJ1dGVzLmlucHV0U2VsZWN0b3IpKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9hdHRyaWJ1dGVzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIC8v0L3QsNCx0L7RgCDRg9GB0LvQvtCy0L3QviDQv9GA0LjQstCw0YLQvdGL0YUg0LzQtdGC0L7QtNC+0LIg0LrQu9Cw0YHRgdCwIEZvcm1WYWxpZGF0b3JcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2F0dHJpYnV0ZXMuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fYXR0cmlidXRlcy5lcnJvckNsYXNzKTtcbiAgfTtcblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2F0dHJpYnV0ZXMuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9hdHRyaWJ1dGVzLmVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICB9O1xuXG4gIF9yZXNldElucHV0RXJyb3JzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihlbGVtZW50KTtcbiAgICB9KTtcbiAgfTtcblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfTtcbiAgfTtcblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfTtcblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9hdHRyaWJ1dGVzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH07XG4gIH07XG5cbiAgX2Rpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2F0dHJpYnV0ZXMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gIH07XG5cbiAgcmVzZXRGb3JtVmFsaWRhdGlvbigpIHsgIC8v0L/Rg9Cx0LvQuNGH0L3Ri9C5INC80LXRgtC+0LQg0YHQsdGA0L7RgdCwINC+0YjQuNCx0L7QuiDRhNC+0YDQvCDQuCDRgdCx0YDQvtGB0LAg0LDQutGC0LjQstC90L7Qs9C+INGB0L7RgdGC0L7Rj9C90LjRjyDQutC90L7Qv9C60LhcbiAgICB0aGlzLl9yZXNldElucHV0RXJyb3JzKCk7XG4gICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICB9O1xuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHsgIC8v0L/Rg9Cx0LvQuNGH0L3Ri9C5INC80LXRgtC+0LQg0LLQsNC70LjQtNCw0YbQuNC4INGE0L7RgNC8XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfTtcblxufTtcblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9O1xuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9O1xuXG4gIHJlbmRlcihpdGVtcykge1xuICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcblxuICAgIH0pXG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7IC8vINC00LvRjyDQutC+0L3QutGA0LXRgtC90L7Qs9C+INC/0L7Qv9Cw0L/QsFxuICB9XG4gIC8v0YPRgdC70L7QstC90L4g0L/RgNC40LLQsNGC0L3Ri9C5INC80LXRgtC+0LQg0LfQsNC60YDRi9GC0LjRjyDQutC70LDRgdGB0LAgUG9wdXAg0L/QviDQutC70LDQstC40YjQtSBFc2NcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuICAvL9C/0YPQsdC70LjRh9C90YvQuSDQvNC10YLQvtC0INC+0YLQutGA0YvRgtC40Y8gcG9wdXBcbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9O1xuXG4gIC8v0L/Rg9Cx0LvQuNGH0L3Ri9C5INC80LXRgtC+0LQg0L7RgtC60YDRi9GC0LjRjyBwb3B1cFxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9O1xuXG4gIC8v0L/Rg9Cx0LvQuNGH0L3Ri9C5INC80LXRgtC+0LQg0YPRgdGC0LDQvdC+0LLQutC4INGB0LvRg9GI0LDRgtC10LvQtdC5INC90LAg0LfQsNC60YDRi9GC0LjQtSDQv9C+INC60YDQtdGB0YLQuNC60YMg0Lgg0L7QstC10YDQu9C10Y4g0LTQu9GPIHBvcHVwXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykgfHxcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1idXR0b24nKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmVkaXQtZm9ybScpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmVkaXQtZm9ybV9faXRlbScpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcignLmVkaXQtZm9ybV9fc3VibWl0LWJ1dHRvbicpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XG4gIH1cblxuICAvL9GD0YHQu9C+0LLQvdC+INC/0YDQuNCy0LDRgtC90YvQuSDQvNC10YLQvtC0INC/0L7Qu9GD0YfQtdC90LjQtSDQt9C90LDRh9C10L3QuNGPINC40L3Qv9GD0YLQvtCyINCyINGE0L7RgNC80YMg0L/QvtC/0LDQv9CwINC60LvQsNGB0YHQsCBQb3B1cFdpdGhGb3JtXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9mb3JtSW5wdXRWYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICB0aGlzLl9mb3JtSW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KVxuICAgIHJldHVybiB0aGlzLl9mb3JtSW5wdXRWYWx1ZXM7XG4gIH1cblxuICAvL9C/0YPQsdC70LjRh9C90YvQuSDQvNC10YLQvtC0INGD0YHRgtCw0L3QvtCy0LrQuCDQuNC90L/Rg9GC0L7QsiDQuNC3INGE0L7RgNC80YtcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcbiAgICB9KTtcbiAgfVxuICAvL9C/0YPQsdC70LjRh9C90YvQuSDQvNC10YLQvtC0INGD0YHRgtCw0L3QvtCy0LrQuCDRgdC+0YHRgtC+0Y/QvdC40Y8g0LrQvdC+0L/QutC4INC/0YDQuCDQt9Cw0LPRgNGD0LfQutC1INC00LDQvdC90YvRhSDQvdCwINGB0LXRgNCy0LXRgFxuICBzaG93TG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25UZXh0O1xuICAgIH1cbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KVxuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuICAvL9C/0YPQsdC70LjRh9C90YvQuSDQvNC10YLQvtC0INGD0YHRgtCw0L3QvtCy0LrQuCDRgdCw0LHQvNC40YLQsFxuICBoYW5kbGVDb25maXJtYXRpb25TdWJtaXQoY2FsbGJhY2tTdWJtaXQpIHtcbiAgICB0aGlzLl9jYWxsYmFja1N1Ym1pdCA9IGNhbGxiYWNrU3VibWl0O1xuICB9O1xuICAvL9C/0YPQsdC70LjRh9C90YvQuSDQvNC10YLQvtC0INC60LvQsNGB0YHQsCBQb3B1cFdpdGhDb25maXJtYXRpb24g0LTQu9GPINC+0YLQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9CwXG4gIC8vINC4INC+0L/RgNC10LTQtdC70LXQvdC40Y8g0LDRgNCz0YPQvNC10L3RgtCwINC60L7Qu9Cx0Y3QutCwICjQutCw0YDRgtC+0YfQutC4KSwg0L3QsCDQutC+0YLQvtGA0L7QuSDQsdGD0LTRg9GCINGB0L7QstC10YDRiNCw0YLRjCDQtNC10LnRgdGC0LLQuNC1INGB0LDQsdC80LjRgtCwXG4gIG9wZW4oYXJnKSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHRoaXMuX2NhbGxiYWNrQXJnID0gYXJnO1xuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9jYWxsYmFja1N1Ym1pdCh0aGlzLl9jYWxsYmFja0FyZyk7XG4gICAgfSlcbiAgfVxuXG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2VDYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZS1jYXB0aW9uJyk7XG4gIH1cblxuICBvcGVuKHRpdGxlLCBpbWFnZSkge1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gaW1hZ2U7XG4gICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gdGl0bGU7XG4gICAgIHRoaXMuX3BvcHVwSW1hZ2VDYXB0aW9uLnRleHRDb250ZW50PSB0aXRsZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IHVzZXJQcm9maWxlTmFtZSwgdXNlclByb2ZpbGVEZXNjcmlwdGlvbiwgdXNlclByb2ZpbGVBdmF0YXIgfSkge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gdXNlclByb2ZpbGVOYW1lO1xuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbiA9IHVzZXJQcm9maWxlRGVzY3JpcHRpb247XG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhciA9IHVzZXJQcm9maWxlQXZhdGFyO1xuICB9XG5cbi8vINCy0L7Qt9Cy0YDQsNGCINC00LDQvdC90YvRhSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0LIg0LLQuNC00LUg0L7QsdGK0LXQutGC0LBcbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcbiAgICAgIGF2YXRhcjogdGhpcy5fcHJvZmlsZUF2YXRhci5zcmMsXG4gICAgfTtcbiAgfVxuXG4gIC8v0LTQvtCx0LDQstC70LXQvdC40LUg0LTQsNC90L3Ri9GFINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQvdCwINGB0YLRgNCw0L3QuNGG0YNcbiAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XG4gIH1cbi8v0LTQvtCx0LDQstC70LXQvdC40LUg0LDQstCw0YLQsNGA0LAg0L3QsCDRgdGC0YDQsNC90LjRhtGDXG4gIHNldFVzZXJBdmF0YXIoZGF0YSkge1xuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjID0gZGF0YS5hdmF0YXI7XG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhci5hbHQgPSBkYXRhLm5hbWU7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9zZXJ2ZXJVcmwgPSBvcHRpb25zLnNlcnZlclVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICB9XG4gIC8v0L/QvtC70YPRh9C40YLRjCDQvtGC0LLQtdGCINGBINGB0LXRgNCy0LXRgNCwXG4gIF9nZXRSZXNwb25zZURhdGEocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICAvL9CX0LDQs9GA0YPQt9C40YLRjCDQuNC90YTQvtGA0LzQsNGG0LjRjiDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUg0YEg0L3Rg9C20L3QvtCz0L4g0YHQtdGA0LLQtdGA0LBcbiAgZ2V0VXNlckluZm9BcGkoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3NlcnZlclVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2dldFJlc3BvbnNlRGF0YSk7XG4gIH1cblxuICAvL9Ce0YLRgNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCDQv9GA0L7RhNC40LvRjCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8gKNC40LzRjy/QvtC/0LjRgdCw0L3QuNC1KVxuICBlZGl0UGFnZVVzZXJJbmZvKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fc2VydmVyVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7Li4uZGF0YX0pXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2dldFJlc3BvbnNlRGF0YSk7XG4gIH1cbiAgLy/QntCx0L3QvtCy0LjRgtGMINCw0LLQsNGC0LDRgCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0L3QsCDRgdGC0YDQsNC90LjRhtC1XG4gIGVkaXRVc2VyQXZhdGFyKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fc2VydmVyVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoey4uLmRhdGF9KVxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9nZXRSZXNwb25zZURhdGEpO1xuICB9XG5cbiAgLy/Ql9Cw0LPRgNGD0LfQuNGC0Ywg0LjRgdGF0L7QtNC90YvQtSDQutCw0YDRgtC+0YfQutC4INGBINGB0LXRgNCy0LXRgNCwXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fc2VydmVyVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2dldFJlc3BvbnNlRGF0YSk7XG4gIH1cblxuICAvL9CU0L7QsdCw0LLQuNGC0Ywg0L3QvtCy0YPRjiDQutCw0YDRgtC+0YfQutGDXG4gIGFkZENhcmQoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9zZXJ2ZXJVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoey4uLmRhdGF9KVxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9nZXRSZXNwb25zZURhdGEpO1xuICB9XG5cbiAgLy/Qo9C00LDQu9C40YLRjCDQutCw0YDRgtC+0YfQutGDXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3NlcnZlclVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2dldFJlc3BvbnNlRGF0YSk7XG4gIH1cblxuICAvL9Cf0L7RgdGC0LDQstC40YLRjCDQu9Cw0LnQuiDQutCw0YDRgtC+0YfQutC1XG4gIGFkZExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3NlcnZlclVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2dldFJlc3BvbnNlRGF0YSk7XG4gIH1cblxuICAvL9Cj0LHRgNCw0YLRjCDQu9Cw0LnQulxuICByZW1vdmVMaWtlKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9zZXJ2ZXJVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9nZXRSZXNwb25zZURhdGEpO1xuICB9XG59XG5cblxuIiwiY29uc3QgdmFsaWRhdGlvbkF0dHJpYnV0ZXMgPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5lZGl0LWZvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLmVkaXQtZm9ybV9faXRlbScsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLmVkaXQtZm9ybV9fc3VibWl0LWJ1dHRvbicsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdlZGl0LWZvcm1fX3N1Ym1pdC1idXR0b25fZGlzYWJsZWQnLFxuICBpbnB1dEVycm9yQ2xhc3M6ICdlZGl0LWZvcm1fX2l0ZW1fc3RhdGVfZXJyb3InLFxuICBlcnJvckNsYXNzOiAnZWRpdC1mb3JtX19pbnB1dC1lcnJvcl92aXNpYmxlJ1xufTtcblxuLy8g0J/QvtC70YPRh9C40YLRjCDQtNC+0YHRgtGD0L8g0LogRE9NLdGN0LvQtdC80LXQvdGC0LDQvFxuLy8g0J/QvtC70YPRh9C40YLRjCDQtNC+0YHRgtGD0L8g0Log0LrQvdC+0L/QumUgZWRpdCDQtNC70Y8g0L7RgtC60YDRi9GC0LjRjyDQv9C+0L8t0LDQv9CwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y9cbmNvbnN0IHBvcHVwUHJvZmlsZU9wZW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcbi8vINCf0L7Qu9GD0YfQuNGC0Ywg0LTQvtGB0YLRg9C/INC6INC60L3QvtC/0LplIGFkZCDQtNC70Y8g0L7RgtC60YDRi9GC0LjRjyDQv9C+0L8t0LDQv9CwINC00L7QsdCw0LLQu9C10L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuCDRgSDQvNC10YHRgtC+0LxcbmNvbnN0IHBvcHVwUGxhY2VPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcbi8vINCf0L7Qu9GD0YfQuNGC0Ywg0LTQvtGB0YLRg9C/INC6INC60L3QvtC/0LplIGF2YXRhckVkaXRCdXR0b24g0LTQu9GPINC+0YLQutGA0YvRgtC40Y8g0L/QvtC/LdCw0L/QsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINCw0LLQsNGC0LDRgNCwXG5jb25zdCBwb3B1cEF2YXRhck9wZW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWVkaXQtYnV0dG9uJyk7XG5cbi8vINCf0L7Qu9GD0YfQuNGC0Ywg0LTQvtGB0YLRg9C/INC6INGN0LvQtdC80LXQvdGC0LDQvCBwcm9maWxlINC00LvRjyDQt9Cw0L/QvtC70L3QtdC90LjRjyDRhNC+0YDQvNGLIHBvcHVwRWRpdFByb2ZpbFxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fbmFtZScpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJyk7XG5jb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhcicpO1xuXG4vLyDQn9C+0LvRg9GH0LjRgtGMINC00L7RgdGC0YPQvyDQuiDRhNC+0YDQvNC1IHByb2ZpbGUtZWRpdC1mb3JtINC00LvRjyBwb3B1cEVkaXRQcm9maWxlINC4INC10LUg0Y3Qu9C10LzQtdC90YLQsNC8XG5jb25zdCBmb3JtUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9maWxlLWVkaXQtZm9ybScpO1xuXG4vLyDQn9C+0LvRg9GH0LjRgtGMINC00L7RgdGC0YPQvyDQuiDRhNC+0YDQvNC1IHBsYWNlLWZvcm0gINC00LvRjyBwb3B1cEVsZW1lbnRBZGQg0Lgg0LXQtSDRjdC70LXQvNC10L3RgtCw0LxcbmNvbnN0IGZvcm1QbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwbGFjZS1mb3JtJyk7XG5cbi8vINCf0L7Qu9GD0YfQuNGC0Ywg0LTQvtGB0YLRg9C/INC6INGE0L7RgNC80LUgYXZhdGFyLWZvcm0gINC00LvRjyBwb3B1cEVkaXRBdmF0YXIg0Lgg0LXQtSDRjdC70LXQvNC10L3RgtCw0LxcbmNvbnN0IGZvcm1BdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXZhdGFyLWVkaXQtZm9ybScpO1xuXG5cbmV4cG9ydCB7XG4gIHZhbGlkYXRpb25BdHRyaWJ1dGVzLFxuICBwcm9maWxlTmFtZSxcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxuICBwcm9maWxlQXZhdGFyLFxuICBmb3JtUHJvZmlsZSxcbiAgZm9ybVBsYWNlLFxuICBwb3B1cFByb2ZpbGVPcGVuQnV0dG9uLFxuICBwb3B1cFBsYWNlT3BlbkJ1dHRvbixcbiAgcG9wdXBBdmF0YXJPcGVuQnV0dG9uLFxuICBmb3JtQXZhdGFyXG59XG4iLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcblxuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XG5cbmltcG9ydCB7XG4gIHZhbGlkYXRpb25BdHRyaWJ1dGVzLFxuICBwcm9maWxlTmFtZSxcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxuICBwcm9maWxlQXZhdGFyLFxuICBmb3JtUHJvZmlsZSxcbiAgZm9ybVBsYWNlLFxuICBmb3JtQXZhdGFyLFxuICBwb3B1cFByb2ZpbGVPcGVuQnV0dG9uLFxuICBwb3B1cFBsYWNlT3BlbkJ1dHRvbixcbiAgcG9wdXBBdmF0YXJPcGVuQnV0dG9uLFxuXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBzZXJ2ZXJVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQ4JyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICc1ZDI5NDdjOS1iYjlmLTRjN2YtYWVmMC1jODliZmU4NDhmYzAnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfVxufSk7XG5cbmxldCB1c2VyO1xuXG4vLyDQt9Cw0LPRgNGD0LfQutCwINGBINGB0LXRgNCy0LXRgNCwINC40L3RhNC+0YDQvNCw0YbQuNC4INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtSDQuCDQvdCw0YfQsNC70YzQvdGL0YUg0LrQsNGA0YLQvtGH0LXQulxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mb0FwaSgpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxuICAudGhlbigoW3VzZXJJbmZvLCBpbml0aWFsQ2FyZHNdKSA9PiB7XG4gICAgdXNlciA9IHVzZXJJbmZvO1xuICAgIHByb2ZpbGVJbmZvLnNldFVzZXJJbmZvKHVzZXJJbmZvKTtcbiAgICBwcm9maWxlSW5mby5zZXRVc2VyQXZhdGFyKHVzZXJJbmZvKTtcbiAgICBjYXJkc1NlY3Rpb24ucmVuZGVyKGluaXRpYWxDYXJkcyk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgfSk7XG5cbi8v0YHQvtC30LTQsNC90LjQtSDRjdC60LfQtdC80L/Qu9GP0YDQsCDQutC70LDRgdGB0LAg0YEg0LjQvdGE0L7RgNC80LDRhtC40LXQuSDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUgKNC40LzRjywg0L7Qv9C40YHQsNC90LjQtSwg0LDQstCw0YLQsNGAKVxuY29uc3QgcHJvZmlsZUluZm8gPSBuZXcgVXNlckluZm8oe1xuICB1c2VyUHJvZmlsZU5hbWU6IHByb2ZpbGVOYW1lLFxuICB1c2VyUHJvZmlsZURlc2NyaXB0aW9uOiBwcm9maWxlRGVzY3JpcHRpb24sXG4gIHVzZXJQcm9maWxlQXZhdGFyOiBwcm9maWxlQXZhdGFyLFxufVxuKTtcblxuLy/Qn9C+0L/QsNC/INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y9cbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6ICcucG9wdXBfdHlwZV9wcm9maWxlLWVkaXRpbmcnLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgIHBvcHVwRWRpdFByb2ZpbGUuc2hvd0xvYWRpbmcodHJ1ZSk7XG4gICAgYXBpLmVkaXRQYWdlVXNlckluZm8oZGF0YSlcbiAgICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgICBwcm9maWxlSW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XG4gICAgICAgIHBvcHVwRWRpdFByb2ZpbGUuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcG9wdXBFZGl0UHJvZmlsZS5zaG93TG9hZGluZyhmYWxzZSk7XG4gICAgICB9KTtcbiAgfVxufVxuKTtcblxucG9wdXBFZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL9Cf0L7Qv9Cw0L8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQsNCy0LDQstGC0LDRgNCwXG5jb25zdCBwb3B1cEVkaXRBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6ICcucG9wdXBfdHlwZV9hdmF0YXItZWRpdGluZycsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XG4gICAgcG9wdXBFZGl0QXZhdGFyLnNob3dMb2FkaW5nKHRydWUpO1xuICAgIGFwaS5lZGl0VXNlckF2YXRhcihkYXRhKVxuICAgICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XG4gICAgICAgIHByb2ZpbGVJbmZvLnNldFVzZXJBdmF0YXIodXNlckRhdGEpO1xuICAgICAgICBwb3B1cEVkaXRBdmF0YXIuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcG9wdXBFZGl0QXZhdGFyLnNob3dMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pO1xuICB9XG59XG4pO1xuXG5wb3B1cEVkaXRBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy/Qn9C+0L/QsNC/INC/0YDQvtGB0LzQvtGC0YDQsCDQuNC30L7QsdGA0LDQttC10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcbmNvbnN0IHBvcHVwSW1hZ2VPcGVuID0gbmV3IFBvcHVwV2l0aEltYWdlKFxuICAnLnBvcHVwX3R5cGVfaW1hZ2Utb3BlbmluZydcbik7XG5wb3B1cEltYWdlT3Blbi5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL9Cf0L7Qv9Cw0L8g0L/QvtC00YLQstC10YDQttC00LXQvdC40Y8g0YPQtNCw0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XG5jb25zdCBwb3B1cERlbGV0ZUNhcmQgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKCcucG9wdXBfdHlwZV9lbGVtZW50LWRlbGV0ZScpO1xuICBwb3B1cERlbGV0ZUNhcmQuaGFuZGxlQ29uZmlybWF0aW9uU3VibWl0KFxuICAgICBjYXJkID0+IHtcbiAgICBhcGkuZGVsZXRlQ2FyZChjYXJkLmNhcmRJZClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XG4gICAgICAgIHBvcHVwRGVsZXRlQ2FyZC5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KVxuICB9XG4pXG5cbnBvcHVwRGVsZXRlQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL9Ch0L7Qt9C00LDQvdC40LUg0LrQsNGA0YLQvtGH0LrQuFxuY29uc3QgY3JlYXRlQ2FyZCA9IChpdGVtKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XG4gICAgZGF0YTogaXRlbSxcbiAgICB0ZW1wbGF0ZTogJyN0ZW1wbGF0ZS1mb3ItZWxlbWVudCcsXG4gICAgaGFuZGxlQ2FyZENsaWNrOiAodGl0bGUsIGltYWdlKSA9PiB7XG4gICAgICBwb3B1cEltYWdlT3Blbi5vcGVuKHRpdGxlLCBpbWFnZSk7XG4gICAgfSxcbiAgICBoYW5kbGVBZGRMaWtlOiAoY2FyZCkgPT4ge1xuICAgICAgYXBpLmFkZExpa2UoY2FyZC5jYXJkSWQpXG4gICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgY2FyZC5sb2FkQ2FyZChkYXRhKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9KVxuICAgIH0sXG4gICAgaGFuZGxlUmVtb3ZlTGlrZTogKGNhcmQpID0+IHtcbiAgICAgIGFwaS5yZW1vdmVMaWtlKGNhcmQuY2FyZElkKVxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgIGNhcmQubG9hZENhcmQoZGF0YSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSlcbiAgICB9LFxuICAgIGhhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrOiAoY2FyZCkgPT4ge1xuICAgICAgcG9wdXBEZWxldGVDYXJkLm9wZW4oY2FyZClcbiAgICB9LFxuICB9LCB1c2VyLl9pZCk7XG5cbiAgY29uc3QgbmV3Q2FyZCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG4gIHJldHVybiBuZXdDYXJkO1xufTtcblxuLy/RgdC+0LfQtNCw0L3QuNC1INGN0LrQt9C10LzQv9C70Y/RgNCwINGB0LXQutGG0LjQuCwg0L7RgtCy0LXRh9Cw0Y7RidC10Lkg0LfQsCDQtNC+0LHQsNCy0LvQtdC90LjQtSDQuNGB0YXQvtC00L3Ri9GFINC60LDRgNGC0L7Rh9C10Log0LIg0LrQvtC90YLQtdC50L3QtdGAXG5jb25zdCBjYXJkc1NlY3Rpb24gPSBuZXcgU2VjdGlvbih7XG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgIGNhcmRzU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpO1xuICB9LFxufSxcbiAgJy5lbGVtZW50c19fbGlzdCdcbik7XG5cbi8v0L/QvtC/0LDQvyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4INC80LXRgdGC0LBcbmNvbnN0IHBvcHVwQWRkQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cF90eXBlX2VsZW1lbnQtYWRkJyxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGl0ZW0pID0+IHtcbiAgICBwb3B1cEFkZENhcmQuc2hvd0xvYWRpbmcodHJ1ZSk7XG4gICAgYXBpLmFkZENhcmQoaXRlbSlcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGNhcmRzU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoZGF0YSkpO1xuICAgICAgICBwb3B1cEFkZENhcmQuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcG9wdXBBZGRDYXJkLnNob3dMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pO1xuICB9XG59XG4pO1xucG9wdXBBZGRDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vINCS0LDQu9C40LTQsNGG0LjRjyDRhNC+0YDQvFxuLy8g0YHQvtC30LTQsNGC0Ywg0LLQsNC70LjQtNCw0YLQvtGAINGE0L7RgNC8INC80LXRgdGC0LAsINC/0YDQvtGE0LjQu9GPINC4INCw0LLQsNGC0LDRgNCwXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25BdHRyaWJ1dGVzLCBmb3JtUHJvZmlsZSk7XG5jb25zdCBwbGFjZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQXR0cmlidXRlcywgZm9ybVBsYWNlKTtcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQXR0cmlidXRlcywgZm9ybUF2YXRhcik7XG5cbi8v0LLRi9C30LLQsNGC0Ywg0LzQtdGC0L7QtCBlbmFibGVWYWxpZGF0aW9uINC00LvRjyDQstCw0LvQuNC00LDRgtC+0YDQsCDQutCw0LbQtNC+0Lkg0YTQvtGA0LzRi1xucGxhY2VGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vL9CU0L7QsdCw0LLQuNGC0Ywg0YHQu9GD0YjQsNGC0LXQu9C4INC90LAg0L3QsNC20LDRgtC40LUg0LrQvdC+0L/QvtC6INC+0YLQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9C+0LIg0L/RgNC+0YTQuNC70Y8sINC80LXRgdGC0LAsINCw0LLQsNGC0LDRgNCwXG5wb3B1cFByb2ZpbGVPcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICBjb25zdCBpbml0aWFsUHJvZmlsZUluZm8gPSBwcm9maWxlSW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlRm9ybVZhbGlkYXRvci5yZXNldEZvcm1WYWxpZGF0aW9uKCk7Ly8g0YHQsdGA0L7RgdC40YLRjCDQstCw0LvQuNC00LDRhtC40Y4g0YTQvtGA0LzRi1xuICBwb3B1cEVkaXRQcm9maWxlLnNldElucHV0VmFsdWVzKGluaXRpYWxQcm9maWxlSW5mbyk7XG4gIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xufSk7XG5cbnBvcHVwQXZhdGFyT3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgaW5pdGlhbFByb2ZpbGVBdmF0YXIgPSBwcm9maWxlSW5mby5nZXRVc2VySW5mbygpO1xuICBhdmF0YXJGb3JtVmFsaWRhdG9yLnJlc2V0Rm9ybVZhbGlkYXRpb24oKTsvLyDRgdCx0YDQvtGB0LjRgtGMINCy0LDQu9C40LTQsNGG0LjRjiDRhNC+0YDQvNGLXG4gIHBvcHVwRWRpdEF2YXRhci5zZXRJbnB1dFZhbHVlcyhpbml0aWFsUHJvZmlsZUF2YXRhcik7XG4gIHBvcHVwRWRpdEF2YXRhci5vcGVuKCk7XG59KTtcblxucG9wdXBQbGFjZU9wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgcGxhY2VGb3JtVmFsaWRhdG9yLnJlc2V0Rm9ybVZhbGlkYXRpb24oKTsvLyDRgdCx0YDQvtGB0LjRgtGMINCy0LDQu9C40LTQsNGG0LjRjiDRhNC+0YDQvNGLXG4gIHBvcHVwQWRkQ2FyZC5vcGVuKCk7XG59KTtcblxuXG5cblxuXG4iXSwibmFtZXMiOlsiQ2FyZCIsInVzZXJJZCIsImRhdGEiLCJ0ZW1wbGF0ZSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUFkZExpa2UiLCJoYW5kbGVSZW1vdmVMaWtlIiwiaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2siLCJ0aGlzIiwiX3RlbXBsYXRlIiwiX2NhcmQiLCJfZ2V0VGVtcGxhdGUiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUFkZExpa2UiLCJfaGFuZGxlUmVtb3ZlTGlrZSIsIl9oYW5kbGVEZWxldGVCdXR0b25DbGljayIsIl91c2VySWQiLCJfbmV3Q2FyZEltYWdlIiwicXVlcnlTZWxlY3RvciIsIl9jYXJkTGlrZUJ1dHRvbiIsIl9jYXJkRGVsZXRlQnV0dG9uIiwiX2xpa2VDb3VudGVyIiwibG9hZENhcmQiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RGVsZXRlQnV0dG9uU3RhdGUiLCJfc2V0TGlrZUJ1dHRvblN0YXRlIiwiX2lzTGlrZWRCeVVzZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJ0ZXh0Q29udGVudCIsIl9saWtlcyIsImxlbmd0aCIsIl9vd25lcklkIiwiX3RpdGxlIiwibmFtZSIsIl9pbWFnZSIsImxpbmsiLCJjYXJkSWQiLCJfaWQiLCJvd25lciIsImxpa2VzIiwic29tZSIsImFueVVzZXIiLCJfc2V0QnV0dG9uc1N0YXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9zZXRFdmVudExpc3RlbmVycyIsInNyYyIsImFsdCIsIkZvcm1WYWxpZGF0b3IiLCJhdHRyaWJ1dGVzIiwiZm9ybUVsZW1lbnQiLCJfYXR0cmlidXRlcyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJmb3JFYWNoIiwiZWxlbWVudCIsIl9oaWRlSW5wdXRFcnJvciIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfZGlzYWJsZUJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsIl9yZXNldElucHV0RXJyb3JzIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInByZXBlbmQiLCJpdGVtcyIsIml0ZW0iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm0iLCJfc3VibWl0QnV0dG9uIiwiX3N1Ym1pdEJ1dHRvblRleHQiLCJfZm9ybUlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsImlzTG9hZGluZyIsInJlc2V0IiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJjYWxsYmFja1N1Ym1pdCIsIl9jYWxsYmFja1N1Ym1pdCIsImFyZyIsIl9jYWxsYmFja0FyZyIsIlBvcHVwV2l0aEltYWdlIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBJbWFnZUNhcHRpb24iLCJ0aXRsZSIsImltYWdlIiwiVXNlckluZm8iLCJ1c2VyUHJvZmlsZU5hbWUiLCJ1c2VyUHJvZmlsZURlc2NyaXB0aW9uIiwidXNlclByb2ZpbGVBdmF0YXIiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZURlc2NyaXB0aW9uIiwiX3Byb2ZpbGVBdmF0YXIiLCJhYm91dCIsImF2YXRhciIsIkFwaSIsIm9wdGlvbnMiLCJfc2VydmVyVXJsIiwic2VydmVyVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsIl9nZXRSZXNwb25zZURhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInZhbGlkYXRpb25BdHRyaWJ1dGVzIiwiZm9ybVNlbGVjdG9yIiwicG9wdXBQcm9maWxlT3BlbkJ1dHRvbiIsInBvcHVwUGxhY2VPcGVuQnV0dG9uIiwicG9wdXBBdmF0YXJPcGVuQnV0dG9uIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJwcm9maWxlQXZhdGFyIiwiZm9ybVByb2ZpbGUiLCJmb3JtUGxhY2UiLCJmb3JtQXZhdGFyIiwidXNlciIsImFwaSIsImF1dGhvcml6YXRpb24iLCJhbGwiLCJnZXRVc2VySW5mb0FwaSIsImdldEluaXRpYWxDYXJkcyIsInVzZXJJbmZvIiwiaW5pdGlhbENhcmRzIiwicHJvZmlsZUluZm8iLCJzZXRVc2VySW5mbyIsInNldFVzZXJBdmF0YXIiLCJjYXJkc1NlY3Rpb24iLCJyZW5kZXIiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJwb3B1cEVkaXRQcm9maWxlIiwic2hvd0xvYWRpbmciLCJlZGl0UGFnZVVzZXJJbmZvIiwidXNlckRhdGEiLCJmaW5hbGx5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cEVkaXRBdmF0YXIiLCJlZGl0VXNlckF2YXRhciIsInBvcHVwSW1hZ2VPcGVuIiwicG9wdXBEZWxldGVDYXJkIiwiaGFuZGxlQ29uZmlybWF0aW9uU3VibWl0IiwiY2FyZCIsImRlbGV0ZUNhcmQiLCJjcmVhdGVDYXJkIiwib3BlbiIsImFkZExpa2UiLCJyZW1vdmVMaWtlIiwiZ2VuZXJhdGVDYXJkIiwiYWRkSXRlbSIsInBvcHVwQWRkQ2FyZCIsImFkZENhcmQiLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsInBsYWNlRm9ybVZhbGlkYXRvciIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiaW5pdGlhbFByb2ZpbGVJbmZvIiwiZ2V0VXNlckluZm8iLCJyZXNldEZvcm1WYWxpZGF0aW9uIiwic2V0SW5wdXRWYWx1ZXMiLCJpbml0aWFsUHJvZmlsZUF2YXRhciJdLCJzb3VyY2VSb290IjoiIn0=