(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){var r=e.data,o=e.template,i=e.handleCardClick,a=e.handleAddLike,u=e.handleRemoveLike,c=e.handleDeleteButtonClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._template=o,this._card=this._getTemplate(),this._handleCardClick=i,this._handleAddLike=a,this._handleRemoveLike=u,this._handleDeleteButtonClick=c,this._userId=n,this._newCardImage=this._card.querySelector(".element__image"),this._cardLikeButton=this._card.querySelector(".element__like-button"),this._cardDeleteButton=this._card.querySelector(".element__delete-button"),this._likeCounter=this._card.querySelector(".element__like-label"),this.loadCard(r)}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._template).content.querySelector(".elements__list-item").cloneNode(!0)}},{key:"_setButtonsState",value:function(){this._setDeleteButtonState(),this._setLikeButtonState()}},{key:"_setLikeButtonState",value:function(){this._isLikedByUser?this._cardLikeButton.classList.add("element__like-button_active"):this._cardLikeButton.classList.remove("element__like-button_active"),this._likeCounter.textContent=this._likes.length}},{key:"_setDeleteButtonState",value:function(){this._userId!==this._ownerId&&this._cardDeleteButton.remove()}},{key:"loadCard",value:function(e){var t=this;this._title=e.name,this._image=e.link,this.cardId=e._id,this._ownerId=e.owner._id,this._likes=e.likes,this._isLikedByUser=this._likes.some((function(e){return e._id===t._userId})),this._setButtonsState()}},{key:"deleteCard",value:function(){this._card.remove(),this._card=null}},{key:"_setEventListeners",value:function(){var e=this;this._newCardImage.addEventListener("click",(function(){e._handleCardClick(e._title,e._image)})),this._cardLikeButton.addEventListener("click",(function(){e._isLikedByUser?e._handleRemoveLike(e):e._handleAddLike(e)})),this._cardDeleteButton.addEventListener("click",(function(){e._handleDeleteButtonClick(e)}))}},{key:"generateCard",value:function(){return this._setEventListeners(),this._newCardImage.src=this._image,this._card.querySelector(".element__title").textContent=this._title,this._newCardImage.alt=this._title,this._card}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._attributes=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},t),this._formElement=o,this._inputList=Array.from(this._formElement.querySelectorAll(this._attributes.inputSelector)),this._buttonElement=this._formElement.querySelector(this._attributes.submitButtonSelector)}var t,i;return t=e,(i=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._attributes.inputErrorClass),n.textContent=t,n.classList.add(this._attributes.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._attributes.inputErrorClass),t.classList.remove(this._attributes.errorClass),t.textContent=""}},{key:"_resetInputErrors",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._disableButton():(this._buttonElement.classList.remove(this._attributes.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_disableButton",value:function(){this._buttonElement.classList.add(this._attributes.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"resetFormValidation",value:function(){this._resetInputErrors(),this._disableButton()}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&o(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"render",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close-button"))&&e.close()}))}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=h(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},p.apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._handleFormSubmit=r,t._form=t._popup.querySelector(".edit-form"),t._inputList=t._form.querySelectorAll(".edit-form__item"),t._submitButton=t._form.querySelector(".edit-form__submit-button"),t._submitButtonText=t._submitButton.textContent,t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formInputValues={},this._inputList.forEach((function(t){e._formInputValues[t.name]=t.value})),this._formInputValues}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"showLoading",value:function(e){this._submitButton.textContent=e?"Сохранение...":this._submitButtonText}},{key:"close",value:function(){p(_(a.prototype),"close",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var e=this;p(_(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=w(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function O(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"setSubmitHandler",value:function(e){this._callbackSubmit=e}},{key:"open",value:function(e){g(E(a.prototype),"open",this).call(this),this._callbackArg=e}},{key:"setEventListeners",value:function(){var e=this;g(E(a.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(t){t.preventDefault(),e._callbackSubmit(e._callbackArg)}))}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=C(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},L.apply(this,arguments)}function C(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}function B(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=D(r);if(o){var n=D(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return B(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._popupImage=t._popup.querySelector(".popup__image"),t._popupImageCaption=t._popup.querySelector(".popup__image-caption"),t}return t=a,(n=[{key:"open",value:function(e,t){this._popupImage.src=t,this._popupImage.alt=e,this._popupImageCaption.textContent=e,L(D(a.prototype),"open",this).call(this)}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=function(){function e(t){var n=t.userProfileName,r=t.userProfileDescription,o=t.userProfileAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=n,this._profileDescription=r,this._profileAvatar=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,about:this._profileDescription.textContent,avatar:this._profileAvatar.src}}},{key:"setUserInfo",value:function(e){this._profileName.textContent=e.name,this._profileDescription.textContent=e.about}},{key:"setUserAvatar",value:function(e){this._profileAvatar.src=e.avatar,this._profileAvatar.alt=e.name}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._serverUrl=t.serverUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getUserInfoApi",value:function(){return fetch("".concat(this._serverUrl,"/users/me"),{headers:this._headers}).then(this._getResponseData)}},{key:"editPageUserInfo",value:function(e){return fetch("".concat(this._serverUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(T({},e))}).then(this._getResponseData)}},{key:"editUserAvatar",value:function(e){return fetch("".concat(this._serverUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(T({},e))}).then(this._getResponseData)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._serverUrl,"/cards"),{headers:this._headers}).then(this._getResponseData)}},{key:"addCard",value:function(e){return fetch("".concat(this._serverUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(T({},e))}).then(this._getResponseData)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._serverUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._getResponseData)}},{key:"addLike",value:function(e){return fetch("".concat(this._serverUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then(this._getResponseData)}},{key:"removeLike",value:function(e){return fetch("".concat(this._serverUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then(this._getResponseData)}}])&&V(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),N={formSelector:".edit-form",inputSelector:".edit-form__item",submitButtonSelector:".edit-form__submit-button",inactiveButtonClass:"edit-form__submit-button_disabled",inputErrorClass:"edit-form__item_state_error",errorClass:"edit-form__input-error_visible"},H=document.querySelector(".profile__edit-button"),J=document.querySelector(".profile__add-button"),M=document.querySelector(".profile__avatar-edit-button"),z=document.querySelector(".profile__name"),$=document.querySelector(".profile__description"),G=document.querySelector(".profile__avatar"),K=document.querySelector("#profile-edit-form"),Q=document.querySelector("#place-form"),W=document.querySelector("#avatar-edit-form");function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Y,Z=new F({serverUrl:"https://mesto.nomoreparties.co/v1/cohort-48",headers:{authorization:"5d2947c9-bb9f-4c7f-aef0-c89bfe848fc0","Content-Type":"application/json"}});Promise.all([Z.getUserInfoApi(),Z.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];Y=o,ee.setUserInfo(o),ee.setUserAvatar(o),ae.render(i)})).catch((function(e){console.log(e)}));var ee=new A({userProfileName:z,userProfileDescription:$,userProfileAvatar:G}),te=new b({popupSelector:".popup_type_profile-editing",handleFormSubmit:function(e){te.showLoading(!0),Z.editPageUserInfo(e).then((function(e){ee.setUserInfo(e),te.close()})).catch((function(e){console.log(e)})).finally((function(){te.showLoading(!1)}))}});te.setEventListeners();var ne=new b({popupSelector:".popup_type_avatar-editing",handleFormSubmit:function(e){ne.showLoading(!0),Z.editUserAvatar(e).then((function(e){ee.setUserAvatar(e),ne.close()})).catch((function(e){console.log(e)})).finally((function(){ne.showLoading(!1)}))}});ne.setEventListeners();var re=new R(".popup_type_image-opening");re.setEventListeners();var oe=new S(".popup_type_element-delete");oe.setSubmitHandler((function(e){Z.deleteCard(e.cardId).then((function(){e.deleteCard(),oe.close()})).catch((function(e){console.log(e)}))})),oe.setEventListeners();var ie=function(e){return new t({data:e,template:"#template-for-element",handleCardClick:function(e,t){re.open(e,t)},handleAddLike:function(e){Z.addLike(e.cardId).then((function(t){e.loadCard(t)})).catch((function(e){console.log(e)}))},handleRemoveLike:function(e){Z.removeLike(e.cardId).then((function(t){e.loadCard(t)})).catch((function(e){console.log(e)}))},handleDeleteButtonClick:function(e){oe.open(e)}},Y._id).generateCard()},ae=new u({renderer:function(e){ae.addItem(ie(e))}},".elements__list"),ue=new b({popupSelector:".popup_type_element-add",handleFormSubmit:function(e){ue.showLoading(!0),Z.addCard(e).then((function(e){ae.addItem(ie(e)),ue.close()})).catch((function(e){console.log(e)})).finally((function(){ue.showLoading(!1)}))}});ue.setEventListeners();var ce=new i(N,K),se=new i(N,Q),le=new i(N,W);se.enableValidation(),ce.enableValidation(),le.enableValidation(),H.addEventListener("click",(function(){var e=ee.getUserInfo();ce.resetFormValidation(),te.setInputValues(e),te.open()})),M.addEventListener("click",(function(){var e=ee.getUserInfo();le.resetFormValidation(),ne.setInputValues(e),ne.open()})),J.addEventListener("click",(function(){se.resetFormValidation(),ue.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixJQUFJdkosRUFBY3NHLEVBQXNCUSxHQUMvRDBDLEdBQXFCLElBQUl4SixFQUFjc0csRUFBc0JTLEdBQzdEMEMsR0FBc0IsSUFBSXpKLEVBQWNzRyxFQUFzQlUsR0FHcEV3QyxHQUFtQkUsbUJBQ25CSCxHQUFxQkcsbUJBQ3JCRCxHQUFvQkMsbUJBR3BCbEQsRUFBdUI1RyxpQkFBaUIsU0FBUyxXQUMvQyxJQUFNK0osRUFBcUJsQyxHQUFZbUMsY0FDdkNMLEdBQXFCTSxzQkFDckIzQixHQUFpQjRCLGVBQWVILEdBQ2hDekIsR0FBaUJjLE1BQ2xCLElBRUR0QyxFQUFzQjlHLGlCQUFpQixTQUFTLFdBQzlDLElBQU1tSyxFQUF1QnRDLEdBQVltQyxjQUN6Q0gsR0FBb0JJLHNCQUNwQnJCLEdBQWdCc0IsZUFBZUMsR0FDL0J2QixHQUFnQlEsTUFDakIsSUFFRHZDLEVBQXFCN0csaUJBQWlCLFNBQVMsV0FDN0M0SixHQUFtQkssc0JBQ25CUixHQUFhTCxNQUNkLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIHRlbXBsYXRlLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUFkZExpa2UsIGhhbmRsZVJlbW92ZUxpa2UsIGhhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrIH0sIHVzZXJJZCkge1xuICAgIHRoaXMuX3RlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgdGhpcy5fY2FyZCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUFkZExpa2UgPSBoYW5kbGVBZGRMaWtlO1xuICAgIHRoaXMuX2hhbmRsZVJlbW92ZUxpa2UgPSBoYW5kbGVSZW1vdmVMaWtlO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrID0gaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2s7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICAgIHRoaXMuX25ld0NhcmRJbWFnZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltYWdlJyk7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWJ1dHRvbicpO1xuICAgIHRoaXMuX2NhcmREZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19kZWxldGUtYnV0dG9uJyk7XG4gICAgdGhpcy5fbGlrZUNvdW50ZXIgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWxhYmVsJyk7XG5cbiAgICB0aGlzLmxvYWRDYXJkKGRhdGEpO1xuICB9XG4gIC8v0L3QsNCx0L7RgCDRg9GB0LvQvtCy0L3QviDQv9GA0LjQstCw0YLQvdGL0YUg0LzQtdGC0L7QtNC+0LIg0LrQu9Cw0YHRgdCwIENhcmRcblxuICAvL9C80LXRgtC+0LQg0L/QvtC70YPRh9C10L3QuNGPINGI0LDQsdC70L7QvdCwINC60LDRgNGC0L7Rh9C60Lgg0L/Rg9GC0LXQvCDQutC70L7QvdC40YDQvtCy0LDQvdC40Y9cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHJldHVybiBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGUpXG4gICAgICAuY29udGVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fbGlzdC1pdGVtJylcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICAvL9Cd0LDRgdGC0YDQvtC50LrQsCDQvtGC0L7QsdGA0LDQttC10L3QuNGPINGN0LvQtdC80LXQvdGC0L7QsiDQutC+0YDQt9C40L3RiyDQuCDQu9Cw0LnQutCwINC90LAg0LrQsNGA0YLQvtGH0LrQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0Lgg0YHRgtC+0YDQvtC90L3QuNGFINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5XG4gIF9zZXRCdXR0b25zU3RhdGUoKSB7XG4gICAgdGhpcy5fc2V0RGVsZXRlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9zZXRMaWtlQnV0dG9uU3RhdGUoKTtcbiAgfVxuXG4gIC8v0J3QsNGB0YLRgNC+0LnQutCwINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0LvQsNC50LrQsCAo0LDQutGC0LjQstC90YvQuS/QvdC10LDQutGC0LjQstC90L7QtSDRgdC+0YHRgtC+0Y/QvdC40LUsINGB0YfQtdGC0YfQuNC6INC70LDQudC60L7QsilcbiAgX3NldExpa2VCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faXNMaWtlZEJ5VXNlcikge1xuICAgICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LmFkZCgnZWxlbWVudF9fbGlrZS1idXR0b25fYWN0aXZlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2VsZW1lbnRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpO1xuICAgIH1cbiAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgfVxuIC8v0J3QsNGB0YLRgNC+0LnQutCwINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0LrQvtGA0LfQuNC90Ysg0YPQtNCw0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4ICjQtNC70Y8g0LTRgNGD0LPQuNGFINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5KVxuICBfc2V0RGVsZXRlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX3VzZXJJZCAhPT0gdGhpcy5fb3duZXJJZCkge1xuICAgICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbi5yZW1vdmUoKTtcblxuICAgIH1cbiAgfVxuXG4gIC8v0LfQsNCz0YDRg9C30LrQsCDQtNCw0L3QvdGL0YUg0LrQsNGA0YLQvtGH0LrQuCAo0YHQstC+0LnRgdGC0LIpXG4gIGxvYWRDYXJkKGRhdGEpIHtcbiAgICB0aGlzLl90aXRsZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9pbWFnZSA9IGRhdGEubGluaztcbiAgICB0aGlzLmNhcmRJZCA9IGRhdGEuX2lkO1xuICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG5cbiAgICAvL9Cj0YHQu9C+0LLQuNC1INC/0YDQuCDQutC+0YLQvtGA0L7QvCDRg9GB0YLQsNC90LDQstC70LjQstCw0LXRgtGB0Y8g0LDQutGC0LjQstC90YvQuSDQt9C90LDRh9C+0Log0LvQsNC50LrQsFxuICAgIC8vKNC/0YDQuCDQvdCw0LvQuNGH0LjQuCDRgtC10LrRg9GJ0LXQs9C+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQsiDQvNCw0YHRgdC40LLQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQuSDQu9Cw0LnQutC90YPQstGI0LjRhSDQutCw0YDRgtC+0YfQutGDINCyINGB0LLQvtC50YHRgtCy0LUg0LrQsNGA0YLQvtGH0LrQuCBfbGlrZXMpXG4gICAgdGhpcy5faXNMaWtlZEJ5VXNlciA9IHRoaXMuX2xpa2VzLnNvbWUoYW55VXNlciA9PiB7XG4gICAgICByZXR1cm4gYW55VXNlci5faWQgPT09IHRoaXMuX3VzZXJJZDtcbiAgICB9KVxuICAgIHRoaXMuX3NldEJ1dHRvbnNTdGF0ZSgpO1xuICB9XG5cbi8vINC80LXRgtC+0LQg0YPQtNCw0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkID0gbnVsbDtcbiAgfVxuXG4gIC8v0LzQtdGC0L7QtCDRg9GB0YLQsNC90L7QstC60Lgg0YHQu9GD0YjQsNGC0LXQu9C10LkgKNC60LvQuNC6INC/0L4g0LrQsNGA0YLQuNC90LrQtSwg0LvQsNC50LrRgywg0LrQvdC+0L/QutC1INGD0LTQsNC70LXQvdC40Y8pXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9uZXdDYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fdGl0bGUsIHRoaXMuX2ltYWdlKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLl9pc0xpa2VkQnlVc2VyKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZVJlbW92ZUxpa2UodGhpcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUFkZExpa2UodGhpcylcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2sodGhpcyk7XG4gICAgfSk7XG4gIH1cblxuICAvL9C/0YPQsdC70LjRh9C90YvQuSDQvNC10YLQvtC0INGB0L7Qt9C00LDQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9uZXdDYXJkSW1hZ2Uuc3JjID0gdGhpcy5faW1hZ2U7XG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX3RpdGxlO1xuICAgIHRoaXMuX25ld0NhcmRJbWFnZS5hbHQgPSB0aGlzLl90aXRsZTtcbiAgICAvLyDQktC10YDQvdGR0Lwg0Y3Qu9C10LzQtdC90YIg0L3QsNGA0YPQttGDXG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XG4gIH1cbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZXMsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fYXR0cmlidXRlcyA9IHsgLi4uYXR0cmlidXRlcyB9O1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2F0dHJpYnV0ZXMuaW5wdXRTZWxlY3RvcikpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2F0dHJpYnV0ZXMuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgLy/QvdCw0LHQvtGAINGD0YHQu9C+0LLQvdC+INC/0YDQuNCy0LDRgtC90YvRhSDQvNC10YLQvtC00L7QsiDQutC70LDRgdGB0LAgRm9ybVZhbGlkYXRvclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fYXR0cmlidXRlcy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9hdHRyaWJ1dGVzLmVycm9yQ2xhc3MpO1xuICB9O1xuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fYXR0cmlidXRlcy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2F0dHJpYnV0ZXMuZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gIH07XG5cbiAgX3Jlc2V0SW5wdXRFcnJvcnMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGVsZW1lbnQpO1xuICAgIH0pO1xuICB9O1xuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9O1xuICB9O1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9O1xuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2F0dHJpYnV0ZXMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfTtcbiAgfTtcblxuICBfZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fYXR0cmlidXRlcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgfTtcblxuICByZXNldEZvcm1WYWxpZGF0aW9uKCkgeyAgLy/Qv9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDRgdCx0YDQvtGB0LAg0L7RiNC40LHQvtC6INGE0L7RgNC8INC4INGB0LHRgNC+0YHQsCDQsNC60YLQuNCy0L3QvtCz0L4g0YHQvtGB0YLQvtGP0L3QuNGPINC60L3QvtC/0LrQuFxuICAgIHRoaXMuX3Jlc2V0SW5wdXRFcnJvcnMoKTtcbiAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG4gIH07XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBlbmFibGVWYWxpZGF0aW9uKCkgeyAgLy/Qv9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDQstCw0LvQuNC00LDRhtC40Lgg0YTQvtGA0LxcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9O1xuXG59O1xuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH07XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH07XG5cbiAgcmVuZGVyKGl0ZW1zKSB7XG4gICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuXG4gICAgfSlcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTsgLy8g0LTQu9GPINC60L7QvdC60YDQtdGC0L3QvtCz0L4g0L/QvtC/0LDQv9CwXG4gIH1cbiAgLy/Rg9GB0LvQvtCy0L3QviDQv9GA0LjQstCw0YLQvdGL0Lkg0LzQtdGC0L7QtCDQt9Cw0LrRgNGL0YLQuNGPINC60LvQsNGB0YHQsCBQb3B1cCDQv9C+INC60LvQsNCy0LjRiNC1IEVzY1xuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG4gIC8v0L/Rg9Cx0LvQuNGH0L3Ri9C5INC80LXRgtC+0LQg0L7RgtC60YDRi9GC0LjRjyBwb3B1cFxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH07XG5cbiAgLy/Qv9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDQvtGC0LrRgNGL0YLQuNGPIHBvcHVwXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH07XG5cbiAgLy/Qv9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDRg9GB0YLQsNC90L7QstC60Lgg0YHQu9GD0YjQsNGC0LXQu9C10Lkg0L3QsCDQt9Cw0LrRgNGL0YLQuNC1INC/0L4g0LrRgNC10YHRgtC40LrRgyDQuCDQvtCy0LXRgNC70LXRjiDQtNC70Y8gcG9wdXBcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSB8fFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ1dHRvbicpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuZWRpdC1mb3JtJyk7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdC1mb3JtX19pdGVtJyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKCcuZWRpdC1mb3JtX19zdWJtaXQtYnV0dG9uJyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcbiAgfVxuXG4gIC8v0YPRgdC70L7QstC90L4g0L/RgNC40LLQsNGC0L3Ri9C5INC80LXRgtC+0LQg0L/QvtC70YPRh9C10L3QuNC1INC30L3QsNGH0LXQvdC40Y8g0LjQvdC/0YPRgtC+0LIg0LIg0YTQvtGA0LzRgyDQv9C+0L/QsNC/0LAg0LrQu9Cw0YHRgdCwIFBvcHVwV2l0aEZvcm1cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2Zvcm1JbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIHRoaXMuX2Zvcm1JbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1JbnB1dFZhbHVlcztcbiAgfVxuXG4gIC8v0L/Rg9Cx0LvQuNGH0L3Ri9C5INC80LXRgtC+0LQg0YPRgdGC0LDQvdC+0LLQutC4INC40L3Qv9GD0YLQvtCyINC40Lcg0YTQvtGA0LzRi1xuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xuICAgIH0pO1xuICB9XG4gIC8v0L/Rg9Cx0LvQuNGH0L3Ri9C5INC80LXRgtC+0LQg0YPRgdGC0LDQvdC+0LLQutC4INGB0L7RgdGC0L7Rj9C90LjRjyDQutC90L7Qv9C60Lgg0L/RgNC4INC30LDQs9GA0YPQt9C60LUg0LTQsNC90L3Ri9GFINC90LAg0YHQtdGA0LLQtdGAXG4gIHNob3dMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQ7XG4gICAgfVxuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pXG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gIH1cbiAgLy/Qv9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDRg9GB0YLQsNC90L7QstC60Lgg0YHQsNCx0LzQuNGC0LBcbiAgc2V0U3VibWl0SGFuZGxlcihjYWxsYmFja1N1Ym1pdCkge1xuICAgIHRoaXMuX2NhbGxiYWNrU3VibWl0ID0gY2FsbGJhY2tTdWJtaXQ7XG4gIH07XG4gIC8v0L/Rg9Cx0LvQuNGH0L3Ri9C5INC80LXRgtC+0LQg0LrQu9Cw0YHRgdCwIFBvcHVwV2l0aENvbmZpcm1hdGlvbiDQtNC70Y8g0L7RgtC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LBcbiAgLy8g0Lgg0L7Qv9GA0LXQtNC10LvQtdC90LjRjyDQsNGA0LPRg9C80LXQvdGC0LAg0LrQvtC70LHRjdC60LAgKNC60LDRgNGC0L7Rh9C60LgpLCDQvdCwINC60L7RgtC+0YDQvtC5INCx0YPQtNGD0YIg0YHQvtCy0LXRgNGI0LDRgtGMINC00LXQudGB0YLQstC40LUg0YHQsNCx0LzQuNGC0LBcbiAgb3BlbihhcmcpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy5fY2FsbGJhY2tBcmcgPSBhcmc7XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2NhbGxiYWNrU3VibWl0KHRoaXMuX2NhbGxiYWNrQXJnKTtcbiAgICB9KVxuICB9XG5cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XG4gICAgdGhpcy5fcG9wdXBJbWFnZUNhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlLWNhcHRpb24nKTtcbiAgfVxuXG4gIG9wZW4odGl0bGUsIGltYWdlKSB7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBpbWFnZTtcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IHRpdGxlO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyB1c2VyUHJvZmlsZU5hbWUsIHVzZXJQcm9maWxlRGVzY3JpcHRpb24sIHVzZXJQcm9maWxlQXZhdGFyIH0pIHtcbiAgICB0aGlzLl9wcm9maWxlTmFtZSA9IHVzZXJQcm9maWxlTmFtZTtcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24gPSB1c2VyUHJvZmlsZURlc2NyaXB0aW9uO1xuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIgPSB1c2VyUHJvZmlsZUF2YXRhcjtcbiAgfVxuXG4vLyDQstC+0LfQstGA0LDRgiDQtNCw0L3QvdGL0YUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINCyINCy0LjQtNC1INC+0LHRitC10LrRgtCwXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGFib3V0OiB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQsXG4gICAgICBhdmF0YXI6IHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjLFxuICAgIH07XG4gIH1cblxuICAvL9C00L7QsdCw0LLQu9C10L3QuNC1INC00LDQvdC90YvRhSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0L3QsCDRgdGC0YDQsNC90LjRhtGDXG4gIHNldFVzZXJJbmZvKGRhdGEpIHtcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xuICB9XG4vL9C00L7QsdCw0LLQu9C10L3QuNC1INCw0LLQsNGC0LDRgNCwINC90LAg0YHRgtGA0LDQvdC40YbRg1xuICBzZXRVc2VyQXZhdGFyKGRhdGEpIHtcbiAgICB0aGlzLl9wcm9maWxlQXZhdGFyLnNyYyA9IGRhdGEuYXZhdGFyO1xuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuYWx0ID0gZGF0YS5uYW1lO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5fc2VydmVyVXJsID0gb3B0aW9ucy5zZXJ2ZXJVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgfVxuICAvL9C/0L7Qu9GD0YfQuNGC0Ywg0L7RgtCy0LXRgiDRgSDRgdC10YDQstC10YDQsFxuICBfZ2V0UmVzcG9uc2VEYXRhKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgLy/Ql9Cw0LPRgNGD0LfQuNGC0Ywg0LjQvdGE0L7RgNC80LDRhtC40Y4g0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1INGBINC90YPQttC90L7Qs9C+INGB0LXRgNCy0LXRgNCwXG4gIGdldFVzZXJJbmZvQXBpKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9zZXJ2ZXJVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9nZXRSZXNwb25zZURhdGEpO1xuICB9XG5cbiAgLy/QntGC0YDQtdC00LDQutGC0LjRgNC+0LLQsNGC0Ywg0L/RgNC+0YTQuNC70Ywg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPICjQuNC80Y8v0L7Qv9C40YHQsNC90LjQtSlcbiAgZWRpdFBhZ2VVc2VySW5mbyhkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3NlcnZlclVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyAuLi5kYXRhIH0pXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2dldFJlc3BvbnNlRGF0YSk7XG4gIH1cbiAgLy/QntCx0L3QvtCy0LjRgtGMINCw0LLQsNGC0LDRgCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0L3QsCDRgdGC0YDQsNC90LjRhtC1XG4gIGVkaXRVc2VyQXZhdGFyKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fc2VydmVyVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyAuLi5kYXRhIH0pXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2dldFJlc3BvbnNlRGF0YSk7XG4gIH1cblxuICAvL9CX0LDQs9GA0YPQt9C40YLRjCDQuNGB0YXQvtC00L3Ri9C1INC60LDRgNGC0L7Rh9C60Lgg0YEg0YHQtdGA0LLQtdGA0LBcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9zZXJ2ZXJVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fZ2V0UmVzcG9uc2VEYXRhKTtcbiAgfVxuXG4gIC8v0JTQvtCx0LDQstC40YLRjCDQvdC+0LLRg9GOINC60LDRgNGC0L7Rh9C60YNcbiAgYWRkQ2FyZChkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3NlcnZlclVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IC4uLmRhdGEgfSlcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fZ2V0UmVzcG9uc2VEYXRhKTtcbiAgfVxuXG4gIC8v0KPQtNCw0LvQuNGC0Ywg0LrQsNGA0YLQvtGH0LrRg1xuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9zZXJ2ZXJVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9nZXRSZXNwb25zZURhdGEpO1xuICB9XG5cbiAgLy/Qn9C+0YHRgtCw0LLQuNGC0Ywg0LvQsNC50Log0LrQsNGA0YLQvtGH0LrQtVxuICBhZGRMaWtlKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9zZXJ2ZXJVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9nZXRSZXNwb25zZURhdGEpO1xuICB9XG5cbiAgLy/Qo9Cx0YDQsNGC0Ywg0LvQsNC50LpcbiAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fc2VydmVyVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fZ2V0UmVzcG9uc2VEYXRhKTtcbiAgfVxufVxuXG5cbiIsImNvbnN0IHZhbGlkYXRpb25BdHRyaWJ1dGVzID0ge1xuICBmb3JtU2VsZWN0b3I6ICcuZWRpdC1mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5lZGl0LWZvcm1fX2l0ZW0nLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5lZGl0LWZvcm1fX3N1Ym1pdC1idXR0b24nLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnZWRpdC1mb3JtX19zdWJtaXQtYnV0dG9uX2Rpc2FibGVkJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAnZWRpdC1mb3JtX19pdGVtX3N0YXRlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ2VkaXQtZm9ybV9faW5wdXQtZXJyb3JfdmlzaWJsZSdcbn07XG5cbi8vINCf0L7Qu9GD0YfQuNGC0Ywg0LTQvtGB0YLRg9C/INC6IERPTS3RjdC70LXQvNC10L3RgtCw0Lxcbi8vINCf0L7Qu9GD0YfQuNGC0Ywg0LTQvtGB0YLRg9C/INC6INC60L3QvtC/0LplIGVkaXQg0LTQu9GPINC+0YLQutGA0YvRgtC40Y8g0L/QvtC/LdCw0L/QsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXG5jb25zdCBwb3B1cFByb2ZpbGVPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XG4vLyDQn9C+0LvRg9GH0LjRgtGMINC00L7RgdGC0YPQvyDQuiDQutC90L7Qv9C6ZSBhZGQg0LTQu9GPINC+0YLQutGA0YvRgtC40Y8g0L/QvtC/LdCw0L/QsCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60Lgg0YEg0LzQtdGB0YLQvtC8XG5jb25zdCBwb3B1cFBsYWNlT3BlbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XG4vLyDQn9C+0LvRg9GH0LjRgtGMINC00L7RgdGC0YPQvyDQuiDQutC90L7Qv9C6ZSBhdmF0YXJFZGl0QnV0dG9uINC00LvRjyDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qvy3QsNC/0LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQsNCy0LDRgtCw0YDQsFxuY29uc3QgcG9wdXBBdmF0YXJPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci1lZGl0LWJ1dHRvbicpO1xuXG4vLyDQn9C+0LvRg9GH0LjRgtGMINC00L7RgdGC0YPQvyDQuiDRjdC70LXQvNC10L3RgtCw0LwgcHJvZmlsZSDQtNC70Y8g0LfQsNC/0L7Qu9C90LXQvdC40Y8g0YTQvtGA0LzRiyBwb3B1cEVkaXRQcm9maWxcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25hbWUnKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19kZXNjcmlwdGlvbicpO1xuY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKTtcblxuLy8g0J/QvtC70YPRh9C40YLRjCDQtNC+0YHRgtGD0L8g0Log0YTQvtGA0LzQtSBwcm9maWxlLWVkaXQtZm9ybSDQtNC70Y8gcG9wdXBFZGl0UHJvZmlsZSDQuCDQtdC1INGN0LvQtdC80LXQvdGC0LDQvFxuY29uc3QgZm9ybVByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZmlsZS1lZGl0LWZvcm0nKTtcblxuLy8g0J/QvtC70YPRh9C40YLRjCDQtNC+0YHRgtGD0L8g0Log0YTQvtGA0LzQtSBwbGFjZS1mb3JtICDQtNC70Y8gcG9wdXBFbGVtZW50QWRkINC4INC10LUg0Y3Qu9C10LzQtdC90YLQsNC8XG5jb25zdCBmb3JtUGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGxhY2UtZm9ybScpO1xuXG4vLyDQn9C+0LvRg9GH0LjRgtGMINC00L7RgdGC0YPQvyDQuiDRhNC+0YDQvNC1IGF2YXRhci1mb3JtICDQtNC70Y8gcG9wdXBFZGl0QXZhdGFyINC4INC10LUg0Y3Qu9C10LzQtdC90YLQsNC8XG5jb25zdCBmb3JtQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2F2YXRhci1lZGl0LWZvcm0nKTtcblxuXG5leHBvcnQge1xuICB2YWxpZGF0aW9uQXR0cmlidXRlcyxcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcbiAgcHJvZmlsZUF2YXRhcixcbiAgZm9ybVByb2ZpbGUsXG4gIGZvcm1QbGFjZSxcbiAgcG9wdXBQcm9maWxlT3BlbkJ1dHRvbixcbiAgcG9wdXBQbGFjZU9wZW5CdXR0b24sXG4gIHBvcHVwQXZhdGFyT3BlbkJ1dHRvbixcbiAgZm9ybUF2YXRhclxufVxuIiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5cbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnO1xuXG5pbXBvcnQge1xuICB2YWxpZGF0aW9uQXR0cmlidXRlcyxcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcbiAgcHJvZmlsZUF2YXRhcixcbiAgZm9ybVByb2ZpbGUsXG4gIGZvcm1QbGFjZSxcbiAgZm9ybUF2YXRhcixcbiAgcG9wdXBQcm9maWxlT3BlbkJ1dHRvbixcbiAgcG9wdXBQbGFjZU9wZW5CdXR0b24sXG4gIHBvcHVwQXZhdGFyT3BlbkJ1dHRvbixcblxufSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgc2VydmVyVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC00OCcsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnNWQyOTQ3YzktYmI5Zi00YzdmLWFlZjAtYzg5YmZlODQ4ZmMwJyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gIH1cbn0pO1xuXG5sZXQgdXNlcjtcblxuLy8g0LfQsNCz0YDRg9C30LrQsCDRgSDRgdC10YDQstC10YDQsCDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUg0Lgg0L3QsNGH0LDQu9GM0L3Ri9GFINC60LDRgNGC0L7Rh9C10LpcblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm9BcGkoKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcbiAgLnRoZW4oKFt1c2VySW5mbywgaW5pdGlhbENhcmRzXSkgPT4ge1xuICAgIHVzZXIgPSB1c2VySW5mbztcbiAgICBwcm9maWxlSW5mby5zZXRVc2VySW5mbyh1c2VySW5mbyk7XG4gICAgcHJvZmlsZUluZm8uc2V0VXNlckF2YXRhcih1c2VySW5mbyk7XG4gICAgY2FyZHNTZWN0aW9uLnJlbmRlcihpbml0aWFsQ2FyZHMpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gIH0pO1xuXG4vL9GB0L7Qt9C00LDQvdC40LUg0Y3QutC30LXQvNC/0LvRj9GA0LAg0LrQu9Cw0YHRgdCwINGBINC40L3RhNC+0YDQvNCw0YbQuNC10Lkg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1ICjQuNC80Y8sINC+0L/QuNGB0LDQvdC40LUsINCw0LLQsNGC0LDRgClcbmNvbnN0IHByb2ZpbGVJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlclByb2ZpbGVOYW1lOiBwcm9maWxlTmFtZSxcbiAgdXNlclByb2ZpbGVEZXNjcmlwdGlvbjogcHJvZmlsZURlc2NyaXB0aW9uLFxuICB1c2VyUHJvZmlsZUF2YXRhcjogcHJvZmlsZUF2YXRhcixcbn1cbik7XG5cbi8v0J/QvtC/0LDQvyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfcHJvZmlsZS1lZGl0aW5nJyxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICBwb3B1cEVkaXRQcm9maWxlLnNob3dMb2FkaW5nKHRydWUpO1xuICAgIGFwaS5lZGl0UGFnZVVzZXJJbmZvKGRhdGEpXG4gICAgICAudGhlbigodXNlckRhdGEpID0+IHtcbiAgICAgICAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xuICAgICAgICBwb3B1cEVkaXRQcm9maWxlLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHBvcHVwRWRpdFByb2ZpbGUuc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgICAgfSk7XG4gIH1cbn1cbik7XG5cbnBvcHVwRWRpdFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy/Qn9C+0L/QsNC/INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LDQstCw0LLRgtCw0YDQsFxuY29uc3QgcG9wdXBFZGl0QXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfYXZhdGFyLWVkaXRpbmcnLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgIHBvcHVwRWRpdEF2YXRhci5zaG93TG9hZGluZyh0cnVlKTtcbiAgICBhcGkuZWRpdFVzZXJBdmF0YXIoZGF0YSlcbiAgICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgICBwcm9maWxlSW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhKTtcbiAgICAgICAgcG9wdXBFZGl0QXZhdGFyLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHBvcHVwRWRpdEF2YXRhci5zaG93TG9hZGluZyhmYWxzZSk7XG4gICAgICB9KTtcbiAgfVxufVxuKTtcblxucG9wdXBFZGl0QXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8v0J/QvtC/0LDQvyDQv9GA0L7RgdC80L7RgtGA0LAg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XG5jb25zdCBwb3B1cEltYWdlT3BlbiA9IG5ldyBQb3B1cFdpdGhJbWFnZShcbiAgJy5wb3B1cF90eXBlX2ltYWdlLW9wZW5pbmcnXG4pO1xucG9wdXBJbWFnZU9wZW4uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy/Qn9C+0L/QsNC/INC/0L7QtNGC0LLQtdGA0LbQtNC10L3QuNGPINGD0LTQsNC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuY29uc3QgcG9wdXBEZWxldGVDYXJkID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbignLnBvcHVwX3R5cGVfZWxlbWVudC1kZWxldGUnKTtcbnBvcHVwRGVsZXRlQ2FyZC5zZXRTdWJtaXRIYW5kbGVyKFxuICBjYXJkID0+IHtcbiAgICBhcGkuZGVsZXRlQ2FyZChjYXJkLmNhcmRJZClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XG4gICAgICAgIHBvcHVwRGVsZXRlQ2FyZC5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KVxuICB9XG4pXG5cbnBvcHVwRGVsZXRlQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL9Ch0L7Qt9C00LDQvdC40LUg0LrQsNGA0YLQvtGH0LrQuFxuY29uc3QgY3JlYXRlQ2FyZCA9IChpdGVtKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XG4gICAgZGF0YTogaXRlbSxcbiAgICB0ZW1wbGF0ZTogJyN0ZW1wbGF0ZS1mb3ItZWxlbWVudCcsXG4gICAgaGFuZGxlQ2FyZENsaWNrOiAodGl0bGUsIGltYWdlKSA9PiB7XG4gICAgICBwb3B1cEltYWdlT3Blbi5vcGVuKHRpdGxlLCBpbWFnZSk7XG4gICAgfSxcbiAgICBoYW5kbGVBZGRMaWtlOiAoY2FyZCkgPT4ge1xuICAgICAgYXBpLmFkZExpa2UoY2FyZC5jYXJkSWQpXG4gICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgY2FyZC5sb2FkQ2FyZChkYXRhKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9KVxuICAgIH0sXG4gICAgaGFuZGxlUmVtb3ZlTGlrZTogKGNhcmQpID0+IHtcbiAgICAgIGFwaS5yZW1vdmVMaWtlKGNhcmQuY2FyZElkKVxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgIGNhcmQubG9hZENhcmQoZGF0YSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSlcbiAgICB9LFxuICAgIGhhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrOiAoY2FyZCkgPT4ge1xuICAgICAgcG9wdXBEZWxldGVDYXJkLm9wZW4oY2FyZClcbiAgICB9LFxuICB9LCB1c2VyLl9pZCk7XG5cbiAgY29uc3QgbmV3Q2FyZCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG4gIHJldHVybiBuZXdDYXJkO1xufTtcblxuLy/RgdC+0LfQtNCw0L3QuNC1INGN0LrQt9C10LzQv9C70Y/RgNCwINGB0LXQutGG0LjQuCwg0L7RgtCy0LXRh9Cw0Y7RidC10Lkg0LfQsCDQtNC+0LHQsNCy0LvQtdC90LjQtSDQuNGB0YXQvtC00L3Ri9GFINC60LDRgNGC0L7Rh9C10Log0LIg0LrQvtC90YLQtdC50L3QtdGAXG5jb25zdCBjYXJkc1NlY3Rpb24gPSBuZXcgU2VjdGlvbih7XG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgIGNhcmRzU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpO1xuICB9LFxufSxcbiAgJy5lbGVtZW50c19fbGlzdCdcbik7XG5cbi8v0L/QvtC/0LDQvyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4INC80LXRgdGC0LBcbmNvbnN0IHBvcHVwQWRkQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cF90eXBlX2VsZW1lbnQtYWRkJyxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGl0ZW0pID0+IHtcbiAgICBwb3B1cEFkZENhcmQuc2hvd0xvYWRpbmcodHJ1ZSk7XG4gICAgYXBpLmFkZENhcmQoaXRlbSlcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGNhcmRzU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoZGF0YSkpO1xuICAgICAgICBwb3B1cEFkZENhcmQuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcG9wdXBBZGRDYXJkLnNob3dMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pO1xuICB9XG59XG4pO1xucG9wdXBBZGRDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vINCS0LDQu9C40LTQsNGG0LjRjyDRhNC+0YDQvFxuLy8g0YHQvtC30LTQsNGC0Ywg0LLQsNC70LjQtNCw0YLQvtGAINGE0L7RgNC8INC80LXRgdGC0LAsINC/0YDQvtGE0LjQu9GPINC4INCw0LLQsNGC0LDRgNCwXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25BdHRyaWJ1dGVzLCBmb3JtUHJvZmlsZSk7XG5jb25zdCBwbGFjZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQXR0cmlidXRlcywgZm9ybVBsYWNlKTtcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQXR0cmlidXRlcywgZm9ybUF2YXRhcik7XG5cbi8v0LLRi9C30LLQsNGC0Ywg0LzQtdGC0L7QtCBlbmFibGVWYWxpZGF0aW9uINC00LvRjyDQstCw0LvQuNC00LDRgtC+0YDQsCDQutCw0LbQtNC+0Lkg0YTQvtGA0LzRi1xucGxhY2VGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vL9CU0L7QsdCw0LLQuNGC0Ywg0YHQu9GD0YjQsNGC0LXQu9C4INC90LAg0L3QsNC20LDRgtC40LUg0LrQvdC+0L/QvtC6INC+0YLQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9C+0LIg0L/RgNC+0YTQuNC70Y8sINC80LXRgdGC0LAsINCw0LLQsNGC0LDRgNCwXG5wb3B1cFByb2ZpbGVPcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICBjb25zdCBpbml0aWFsUHJvZmlsZUluZm8gPSBwcm9maWxlSW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlRm9ybVZhbGlkYXRvci5yZXNldEZvcm1WYWxpZGF0aW9uKCk7Ly8g0YHQsdGA0L7RgdC40YLRjCDQstCw0LvQuNC00LDRhtC40Y4g0YTQvtGA0LzRi1xuICBwb3B1cEVkaXRQcm9maWxlLnNldElucHV0VmFsdWVzKGluaXRpYWxQcm9maWxlSW5mbyk7XG4gIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xufSk7XG5cbnBvcHVwQXZhdGFyT3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgaW5pdGlhbFByb2ZpbGVBdmF0YXIgPSBwcm9maWxlSW5mby5nZXRVc2VySW5mbygpO1xuICBhdmF0YXJGb3JtVmFsaWRhdG9yLnJlc2V0Rm9ybVZhbGlkYXRpb24oKTsvLyDRgdCx0YDQvtGB0LjRgtGMINCy0LDQu9C40LTQsNGG0LjRjiDRhNC+0YDQvNGLXG4gIHBvcHVwRWRpdEF2YXRhci5zZXRJbnB1dFZhbHVlcyhpbml0aWFsUHJvZmlsZUF2YXRhcik7XG4gIHBvcHVwRWRpdEF2YXRhci5vcGVuKCk7XG59KTtcblxucG9wdXBQbGFjZU9wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgcGxhY2VGb3JtVmFsaWRhdG9yLnJlc2V0Rm9ybVZhbGlkYXRpb24oKTsvLyDRgdCx0YDQvtGB0LjRgtGMINCy0LDQu9C40LTQsNGG0LjRjiDRhNC+0YDQvNGLXG4gIHBvcHVwQWRkQ2FyZC5vcGVuKCk7XG59KTtcblxuXG5cblxuXG4iXSwibmFtZXMiOlsiQ2FyZCIsInVzZXJJZCIsImRhdGEiLCJ0ZW1wbGF0ZSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUFkZExpa2UiLCJoYW5kbGVSZW1vdmVMaWtlIiwiaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2siLCJ0aGlzIiwiX3RlbXBsYXRlIiwiX2NhcmQiLCJfZ2V0VGVtcGxhdGUiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUFkZExpa2UiLCJfaGFuZGxlUmVtb3ZlTGlrZSIsIl9oYW5kbGVEZWxldGVCdXR0b25DbGljayIsIl91c2VySWQiLCJfbmV3Q2FyZEltYWdlIiwicXVlcnlTZWxlY3RvciIsIl9jYXJkTGlrZUJ1dHRvbiIsIl9jYXJkRGVsZXRlQnV0dG9uIiwiX2xpa2VDb3VudGVyIiwibG9hZENhcmQiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RGVsZXRlQnV0dG9uU3RhdGUiLCJfc2V0TGlrZUJ1dHRvblN0YXRlIiwiX2lzTGlrZWRCeVVzZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJ0ZXh0Q29udGVudCIsIl9saWtlcyIsImxlbmd0aCIsIl9vd25lcklkIiwiX3RpdGxlIiwibmFtZSIsIl9pbWFnZSIsImxpbmsiLCJjYXJkSWQiLCJfaWQiLCJvd25lciIsImxpa2VzIiwic29tZSIsImFueVVzZXIiLCJfc2V0QnV0dG9uc1N0YXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9zZXRFdmVudExpc3RlbmVycyIsInNyYyIsImFsdCIsIkZvcm1WYWxpZGF0b3IiLCJhdHRyaWJ1dGVzIiwiZm9ybUVsZW1lbnQiLCJfYXR0cmlidXRlcyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJmb3JFYWNoIiwiZWxlbWVudCIsIl9oaWRlSW5wdXRFcnJvciIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfZGlzYWJsZUJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsIl9yZXNldElucHV0RXJyb3JzIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInByZXBlbmQiLCJpdGVtcyIsIml0ZW0iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm0iLCJfc3VibWl0QnV0dG9uIiwiX3N1Ym1pdEJ1dHRvblRleHQiLCJfZm9ybUlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsImlzTG9hZGluZyIsInJlc2V0IiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJjYWxsYmFja1N1Ym1pdCIsIl9jYWxsYmFja1N1Ym1pdCIsImFyZyIsIl9jYWxsYmFja0FyZyIsIlBvcHVwV2l0aEltYWdlIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBJbWFnZUNhcHRpb24iLCJ0aXRsZSIsImltYWdlIiwiVXNlckluZm8iLCJ1c2VyUHJvZmlsZU5hbWUiLCJ1c2VyUHJvZmlsZURlc2NyaXB0aW9uIiwidXNlclByb2ZpbGVBdmF0YXIiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZURlc2NyaXB0aW9uIiwiX3Byb2ZpbGVBdmF0YXIiLCJhYm91dCIsImF2YXRhciIsIkFwaSIsIm9wdGlvbnMiLCJfc2VydmVyVXJsIiwic2VydmVyVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsIl9nZXRSZXNwb25zZURhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInZhbGlkYXRpb25BdHRyaWJ1dGVzIiwiZm9ybVNlbGVjdG9yIiwicG9wdXBQcm9maWxlT3BlbkJ1dHRvbiIsInBvcHVwUGxhY2VPcGVuQnV0dG9uIiwicG9wdXBBdmF0YXJPcGVuQnV0dG9uIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJwcm9maWxlQXZhdGFyIiwiZm9ybVByb2ZpbGUiLCJmb3JtUGxhY2UiLCJmb3JtQXZhdGFyIiwidXNlciIsImFwaSIsImF1dGhvcml6YXRpb24iLCJhbGwiLCJnZXRVc2VySW5mb0FwaSIsImdldEluaXRpYWxDYXJkcyIsInVzZXJJbmZvIiwiaW5pdGlhbENhcmRzIiwicHJvZmlsZUluZm8iLCJzZXRVc2VySW5mbyIsInNldFVzZXJBdmF0YXIiLCJjYXJkc1NlY3Rpb24iLCJyZW5kZXIiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJwb3B1cEVkaXRQcm9maWxlIiwic2hvd0xvYWRpbmciLCJlZGl0UGFnZVVzZXJJbmZvIiwidXNlckRhdGEiLCJmaW5hbGx5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cEVkaXRBdmF0YXIiLCJlZGl0VXNlckF2YXRhciIsInBvcHVwSW1hZ2VPcGVuIiwicG9wdXBEZWxldGVDYXJkIiwic2V0U3VibWl0SGFuZGxlciIsImNhcmQiLCJkZWxldGVDYXJkIiwiY3JlYXRlQ2FyZCIsIm9wZW4iLCJhZGRMaWtlIiwicmVtb3ZlTGlrZSIsImdlbmVyYXRlQ2FyZCIsImFkZEl0ZW0iLCJwb3B1cEFkZENhcmQiLCJhZGRDYXJkIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJwbGFjZUZvcm1WYWxpZGF0b3IiLCJhdmF0YXJGb3JtVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsImluaXRpYWxQcm9maWxlSW5mbyIsImdldFVzZXJJbmZvIiwicmVzZXRGb3JtVmFsaWRhdGlvbiIsInNldElucHV0VmFsdWVzIiwiaW5pdGlhbFByb2ZpbGVBdmF0YXIiXSwic291cmNlUm9vdCI6IiJ9