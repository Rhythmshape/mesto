(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e){var n=e.data,r=e.template,o=e.handleCardElementClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._title=n.name,this._image=n.link,this._template=r,this._handleCardElementClick=o}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._template).content.querySelector(".elements__list-item").cloneNode(!0)}},{key:"_handleLikeButton",value:function(){this._cardLikeButton.classList.toggle("element__like-button_active")}},{key:"_handleDeleteButton",value:function(){this._element.remove(),this._element=null}},{key:"_setEventListeners",value:function(){var e=this;this._newElementListItemImage=this._element.querySelector(".element__image"),this._cardLikeButton=this._element.querySelector(".element__like-button"),this._cardDeleteButton=this._element.querySelector(".element__delete-button"),this._newElementListItemImage.addEventListener("click",(function(){e._handleCardElementClick(e._title,e._image)})),this._cardLikeButton.addEventListener("click",(function(){e._handleLikeButton()})),this._cardDeleteButton.addEventListener("click",(function(){e._handleDeleteButton()}))}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".element__image").src=this._image,this._element.querySelector(".element__title").textContent=this._title,this._element.querySelector(".element__image").alt=this._title,this._element}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._attributes=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},t),this._formElement=o,this._inputList=Array.from(this._formElement.querySelectorAll(this._attributes.inputSelector)),this._buttonElement=this._formElement.querySelector(this._attributes.submitButtonSelector)}var t,i;return t=e,(i=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._attributes.inputErrorClass),n.textContent=t,n.classList.add(this._attributes.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._attributes.inputErrorClass),t.classList.remove(this._attributes.errorClass),t.textContent=""}},{key:"_resetInputErrors",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._disableButton():(this._buttonElement.classList.remove(this._attributes.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_disableButton",value:function(){this._buttonElement.classList.add(this._attributes.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"resetFormValidation",value:function(){this._resetInputErrors(),this._disableButton()}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&o(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"render",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close-button"))&&e.close()}))}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=d(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function h(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(o){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function u(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,n))._handleFormSubmit=r,t._formSelector=t._popup.querySelector(".edit-form"),t._inputList=t._formSelector.querySelectorAll(".edit-form__item"),t}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formInputValues={},this._inputList.forEach((function(t){e._formInputValues[t.name]=t.value})),this._formInputValues}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"close",value:function(){f(m(u.prototype),"close",this).call(this),this._formSelector.reset()}},{key:"setEventListeners",value:function(){var e=this;f(m(u.prototype),"setEventListeners",this).call(this),this._formSelector.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(l);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=O(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function E(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupImage=t._popup.querySelector(".popup__image"),t._popupImageCaption=t._popup.querySelector(".popup__image-caption"),t}return t=u,(n=[{key:"open",value:function(e,t){this._popupImage.src=t,this._popupImage.alt=e,this._popupImageCaption.textContent=e,g(k(u.prototype),"open",this).call(this)}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(l);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(t){var n=t.profileNameSelector,r=t.profileDescriptionSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileNameSelector=n,this._profileDescriptionSelector=r}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._profileNameSelector.textContent,description:this._profileDescriptionSelector.textContent}}},{key:"setUserInfo",value:function(e){this._profileNameSelector.textContent=e.name,this._profileDescriptionSelector.textContent=e.description}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],q=(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}}({},I),{formSelector:".edit-form",inputSelector:".edit-form__item",submitButtonSelector:".edit-form__submit-button",inactiveButtonClass:"edit-form__submit-button_disabled",inputErrorClass:"edit-form__item_state_error",errorClass:"edit-form__input-error_visible"}),B=document.querySelector(".profile__edit-button"),D=document.querySelector(".profile__add-button"),x=document.querySelector(".profile__name"),R=document.querySelector(".profile__description"),V=document.querySelector("#profile-edit-form"),T=(document.querySelector("#author-name"),document.querySelector("#author-description"),document.querySelector("#place-form")),F=new P({profileNameSelector:x,profileDescriptionSelector:R}),N=new _({popupSelector:".popup_type_profile-editing",handleFormSubmit:function(e){F.setUserInfo(e),N.close()}});N.setEventListeners();var U=new S(".popup_type_image-opening");U.setEventListeners();var A=function(e){return new t({data:e,template:"#template-for-element",handleCardElementClick:function(e,t){U.open(e,t)}}).generateCard()},z=new c({items:I,renderer:function(e){z.addItem(A(e))}},".elements__list"),M=new _({popupSelector:".popup_type_element-add",handleFormSubmit:function(e){z.addItem(A(e)),M.close()}});M.setEventListeners();var G=new i(q,V),H=new i(q,T);H.enableValidation(),G.enableValidation(),B.addEventListener("click",(function(){var e=F.getUserInfo();G.resetFormValidation(),N.setInputValues(e),N.open()})),D.addEventListener("click",(function(){H.resetFormValidation(),M.open()})),z.render()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQXFCRSxtQkFHckJuQixFQUF1QnRGLGlCQUFpQixTQUFTLFdBQy9DLElBQU0wRyxFQUFxQmQsRUFBWWUsY0FDdkNKLEVBQXFCSyxzQkFDckJmLEVBQWlCZ0IsZUFBZUgsR0FDaENiLEVBQWlCSyxNQUNsQixJQUVEWCxFQUFxQnZGLGlCQUFpQixTQUFTLFdBQzdDd0csRUFBbUJJLHNCQUNuQk4sRUFBZ0JKLE1BQ2pCLElBR0RFLEVBQWFVLFEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIHRlbXBsYXRlLCBoYW5kbGVDYXJkRWxlbWVudENsaWNrIH0pIHtcbiAgICB0aGlzLl90aXRsZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9pbWFnZSA9IGRhdGEubGluaztcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRFbGVtZW50Q2xpY2sgPSBoYW5kbGVDYXJkRWxlbWVudENsaWNrO1xuICB9XG4gIC8v0L3QsNCx0L7RgCDRg9GB0LvQvtCy0L3QviDQv9GA0LjQstCw0YLQvdGL0YUg0LzQtdGC0L7QtNC+0LIg0LrQu9Cw0YHRgdCwIENhcmRcblxuICAvL9C80LXRgtC+0LQg0L/QvtC70YPRh9C10L3QuNGPINGI0LDQsdC70L7QvdCwINC60LDRgNGC0L7Rh9C60Lgg0L/Rg9GC0LXQvCDQutC70L7QvdC40YDQvtCy0LDQvdC40Y9cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHJldHVybiBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGUpXG4gICAgICAuY29udGVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fbGlzdC1pdGVtJylcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICAvL9C80LXRgtC+0LQg0L/QvtGB0YLQsNC90L7QstC60Lgg0LvQsNC50LrQsFxuICBfaGFuZGxlTGlrZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcbiAgfVxuXG4gIC8v0LzQtdGC0L7QtCDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcbiAgX2hhbmRsZURlbGV0ZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgLy/QvNC10YLQvtC0INGD0YHRgtCw0L3QvtCy0LrQuCDRgdC70YPRiNCw0YLQtdC70LXQuVxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbmV3RWxlbWVudExpc3RJdGVtSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpO1xuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZS1idXR0b24nKTtcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fZGVsZXRlLWJ1dHRvbicpO1xuXG5cbiAgICB0aGlzLl9uZXdFbGVtZW50TGlzdEl0ZW1JbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRFbGVtZW50Q2xpY2sodGhpcy5fdGl0bGUsIHRoaXMuX2ltYWdlKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbigpO1xuICAgIH0pO1xuICB9XG5cbiAgLy/Qv9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDRgdC+0LfQtNCw0L3QuNGPINC60LDRgNGC0L7Rh9C60LhcbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKS5zcmMgPSB0aGlzLl9pbWFnZTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190aXRsZScpLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKS5hbHQgPSB0aGlzLl90aXRsZTtcbiAgICAvLyDQktC10YDQvdGR0Lwg0Y3Qu9C10LzQtdC90YIg0L3QsNGA0YPQttGDXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZXMsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fYXR0cmlidXRlcyA9IHsgLi4uYXR0cmlidXRlcyB9O1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2F0dHJpYnV0ZXMuaW5wdXRTZWxlY3RvcikpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2F0dHJpYnV0ZXMuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgLy/QvdCw0LHQvtGAINGD0YHQu9C+0LLQvdC+INC/0YDQuNCy0LDRgtC90YvRhSDQvNC10YLQvtC00L7QsiDQutC70LDRgdGB0LAgRm9ybVZhbGlkYXRvclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fYXR0cmlidXRlcy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9hdHRyaWJ1dGVzLmVycm9yQ2xhc3MpO1xuICB9O1xuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fYXR0cmlidXRlcy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2F0dHJpYnV0ZXMuZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gIH07XG5cbiAgX3Jlc2V0SW5wdXRFcnJvcnMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGVsZW1lbnQpO1xuICAgIH0pO1xuICB9O1xuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9O1xuICB9O1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9O1xuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2F0dHJpYnV0ZXMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfTtcbiAgfTtcblxuICBfZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fYXR0cmlidXRlcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgfTtcblxuICByZXNldEZvcm1WYWxpZGF0aW9uKCkgeyAgLy/Qv9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDRgdCx0YDQvtGB0LAg0L7RiNC40LHQvtC6INGE0L7RgNC8INC4INGB0LHRgNC+0YHQsCDQsNC60YLQuNCy0L3QvtCz0L4g0YHQvtGB0YLQvtGP0L3QuNGPINC60L3QvtC/0LrQuFxuICAgIHRoaXMuX3Jlc2V0SW5wdXRFcnJvcnMoKTtcbiAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG4gIH07XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBlbmFibGVWYWxpZGF0aW9uKCkgeyAgLy/Qv9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDQstCw0LvQuNC00LDRhtC40Lgg0YTQvtGA0LxcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9O1xuXG59O1xuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfTtcblxuICBhZGRJdGVtKGl0ZW0pIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT5cbiAgICAgIHt0aGlzLl9yZW5kZXJlcihpdGVtKTtcblxuICB9KVxufVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3RvciAocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7IC8vINC00LvRjyDQutC+0L3QutGA0LXRgtC90L7Qs9C+INC/0L7Qv9Cw0L/QsFxuICB9XG4gIC8v0YPRgdC70L7QstC90L4g0L/RgNC40LLQsNGC0L3Ri9C5INC80LXRgtC+0LQg0LfQsNC60YDRi9GC0LjRjyDQutC70LDRgdGB0LAgUG9wdXAg0L/QviDQutC70LDQstC40YjQtSBFc2NcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG4vL9C/0YPQsdC70LjRh9C90YvQuSDQvNC10YLQvtC0INC+0YLQutGA0YvRgtC40Y8gcG9wdXBcbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9O1xuXG4vL9C/0YPQsdC70LjRh9C90YvQuSDQvNC10YLQvtC0INC+0YLQutGA0YvRgtC40Y8gcG9wdXBcbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfTtcblxuLy/Qv9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDRg9GB0YLQsNC90L7QstC60Lgg0YHQu9GD0YjQsNGC0LXQu9C10Lkg0L3QsCDQt9Cw0LrRgNGL0YLQuNC1INC/0L4g0LrRgNC10YHRgtC40LrRgyDQuCDQvtCy0LXRgNC70LXRjiDQtNC70Y8gcG9wdXBcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSB8fFxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1idXR0b24nKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gIH0pO1xuIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuZWRpdC1mb3JtJyk7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybVNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lZGl0LWZvcm1fX2l0ZW0nKTtcbiAgfVxuXG4gIC8v0YPRgdC70L7QstC90L4g0L/RgNC40LLQsNGC0L3Ri9C5INC80LXRgtC+0LQg0L/QvtC70YPRh9C10L3QuNC1INC30L3QsNGH0LXQvdC40Y8g0LjQvdC/0YPRgtC+0LIg0LIg0YTQvtGA0LzRgyDQv9C+0L/QsNC/0LAg0LrQu9Cw0YHRgdCwIFBvcHVwV2l0aEZvcm1cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2Zvcm1JbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIHRoaXMuX2Zvcm1JbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pXG5cbiAgICByZXR1cm4gdGhpcy5fZm9ybUlucHV0VmFsdWVzO1xuXG4gIH1cblxuIC8v0L/Rg9Cx0LvQuNGH0L3Ri9C5INC80LXRgtC+0LQg0YPRgdGC0LDQvdC+0LLQutC4INC40L3Qv9GD0YLQvtCyINC40Lcg0YTQvtGA0LzRi1xuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IucmVzZXQoKTtcbiAgfVxuXG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pXG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XG4gICAgdGhpcy5fcG9wdXBJbWFnZUNhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlLWNhcHRpb24nKTtcbiAgfVxuXG4gIG9wZW4odGl0bGUsIGltYWdlKSB7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBpbWFnZTtcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IHRpdGxlO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBwcm9maWxlTmFtZVNlbGVjdG9yLCBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcHJvZmlsZU5hbWVTZWxlY3RvciA9IHByb2ZpbGVOYW1lU2VsZWN0b3I7XG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IgPSBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvcjtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZVNlbGVjdG9yLnRleHRDb250ZW50LFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yLnRleHRDb250ZW50XG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKGRhdGEpIHtcbiAgICB0aGlzLl9wcm9maWxlTmFtZVNlbGVjdG9yLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yLnRleHRDb250ZW50ID0gZGF0YS5kZXNjcmlwdGlvbjtcbiAgfVxuXG59XG4iLCIvLyDQvNCw0YHRgdC40LIg0LrQsNGA0YLQvtGH0LXQuiDQtNC70Y8g0LTQvtCx0LDQstC70LXQvdC40Y8g0L3QsCDRgdGC0YDQsNC90LjRhtGDXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiAn0JDRgNGF0YvQtycsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnJ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZydcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQmNCy0LDQvdC+0LLQvicsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9pdmFub3ZvLmpwZydcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQmtCw0LzRh9Cw0YLQutCwJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L0nLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZydcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQkdCw0LnQutCw0LsnLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYmFpa2FsLmpwZydcbiAgfVxuXTtcblxuY29uc3QgY2FyZHNUb1B1dCA9IHsgLi4uaW5pdGlhbENhcmRzIH07XG5cbmNvbnN0IHZhbGlkYXRpb25BdHRyaWJ1dGVzID0ge1xuICBmb3JtU2VsZWN0b3I6ICcuZWRpdC1mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5lZGl0LWZvcm1fX2l0ZW0nLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5lZGl0LWZvcm1fX3N1Ym1pdC1idXR0b24nLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnZWRpdC1mb3JtX19zdWJtaXQtYnV0dG9uX2Rpc2FibGVkJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAnZWRpdC1mb3JtX19pdGVtX3N0YXRlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ2VkaXQtZm9ybV9faW5wdXQtZXJyb3JfdmlzaWJsZSdcbn07XG5cbi8vINCf0L7Qu9GD0YfQuNGC0Ywg0LTQvtGB0YLRg9C/INC6IERPTS3RjdC70LXQvNC10L3RgtCw0Lxcbi8vINCf0L7Qu9GD0YfQuNGC0Ywg0LTQvtGB0YLRg9C/INC6INC60L3QvtC/0LplIGVkaXQg0LTQu9GPINC+0YLQutGA0YvRgtC40Y8g0L/QvtC/LdCw0L/QsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXG5jb25zdCBwb3B1cFByb2ZpbGVPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XG4vLyDQn9C+0LvRg9GH0LjRgtGMINC00L7RgdGC0YPQvyDQuiDQutC90L7Qv9C6ZSBhZGQg0LTQu9GPINC+0YLQutGA0YvRgtC40Y8g0L/QvtC/LdCw0L/QsCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60Lgg0YEg0LzQtdGB0YLQvtC8XG5jb25zdCBwb3B1cFBsYWNlT3BlbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XG5cbi8vINCf0L7Qu9GD0YfQuNGC0Ywg0LTQvtGB0YLRg9C/INC6INGN0LvQtdC80LXQvdGC0LDQvCBwcm9maWxlINC00LvRjyDQt9Cw0L/QvtC70L3QtdC90LjRjyDRhNC+0YDQvNGLIHBvcHVwRWRpdFByb2ZpbFxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fbmFtZScpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJyk7XG5cbi8vINCf0L7Qu9GD0YfQuNGC0Ywg0LTQvtGB0YLRg9C/INC6INGE0L7RgNC80LUgcHJvZmlsZS1lZGl0LWZvcm0g0LTQu9GPIHBvcHVwRWRpdFByb2ZpbGUg0Lgg0LXQtSDRjdC70LXQvNC10L3RgtCw0LxcbmNvbnN0IGZvcm1Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2ZpbGUtZWRpdC1mb3JtJyk7XG5jb25zdCBmb3JtUHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXV0aG9yLW5hbWUnKTtcbmNvbnN0IGZvcm1Qcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXV0aG9yLWRlc2NyaXB0aW9uJyk7XG5cbi8vINCf0L7Qu9GD0YfQuNGC0Ywg0LTQvtGB0YLRg9C/INC6INGE0L7RgNC80LUgcGxhY2UtZm9ybSAg0LTQu9GPIHBvcHVwRWxlbWVudEFkZCDQuCDQtdC1INGN0LvQtdC80LXQvdGC0LDQvFxuY29uc3QgZm9ybVBsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsYWNlLWZvcm0nKTtcblxuZXhwb3J0IHtcbiAgaW5pdGlhbENhcmRzLFxuICBjYXJkc1RvUHV0LFxuICB2YWxpZGF0aW9uQXR0cmlidXRlcyxcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcbiAgZm9ybVByb2ZpbGVOYW1lLFxuICBmb3JtUHJvZmlsZURlc2NyaXB0aW9uLFxuICBmb3JtUHJvZmlsZSxcbiAgZm9ybVBsYWNlLFxuICBwb3B1cFByb2ZpbGVPcGVuQnV0dG9uLFxuICBwb3B1cFBsYWNlT3BlbkJ1dHRvbixcbn1cbiIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xuXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuXG5pbXBvcnQge1xuICBpbml0aWFsQ2FyZHMsXG4gIGNhcmRzVG9QdXQsXG4gIHZhbGlkYXRpb25BdHRyaWJ1dGVzLFxuICBwcm9maWxlTmFtZSxcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxuICBjYXJkc0NvbnRhaW5lcixcbiAgZm9ybVByb2ZpbGUsXG4gIGZvcm1QbGFjZSxcbiAgcG9wdXBQcm9maWxlT3BlbkJ1dHRvbixcbiAgcG9wdXBQbGFjZU9wZW5CdXR0b25cbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcblxuLy/QmNC90YTQvtGA0LzQsNGG0LjRjyDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LVcbmNvbnN0IHByb2ZpbGVJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgcHJvZmlsZU5hbWVTZWxlY3RvcjogcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yOiBwcm9maWxlRGVzY3JpcHRpb25cbiB9XG4pO1xuXG4vL9Cf0L7Qv9Cw0L8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xuY29uc3QgcG9wdXBFZGl0UHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cF90eXBlX3Byb2ZpbGUtZWRpdGluZycsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XG4gICAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8oZGF0YSk7XG4gICAgcG9wdXBFZGl0UHJvZmlsZS5jbG9zZSgpO1xuICB9XG59KTtcblxucG9wdXBFZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL9Cf0L7Qv9Cw0L8g0L/RgNC+0YHQvNC+0YLRgNCwINC40LfQvtCx0YDQsNC20LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuY29uc3QgcG9wdXBJbWFnZU9wZW4gPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXG4gICcucG9wdXBfdHlwZV9pbWFnZS1vcGVuaW5nJ1xuKTtcbnBvcHVwSW1hZ2VPcGVuLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8v0KTRg9C90LrRhtC40Y8g0YHQvtC30LTQsNC90LjRjyDQutCw0YDRgtC+0YfQutC4XG5jb25zdCBjcmVhdGVDYXJkID0gKGl0ZW0pID0+IHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcbiAgICBkYXRhOiBpdGVtLFxuICAgIHRlbXBsYXRlOiAnI3RlbXBsYXRlLWZvci1lbGVtZW50JyxcbiAgICBoYW5kbGVDYXJkRWxlbWVudENsaWNrOiAodGl0bGUsaW1hZ2UpID0+IHtcbiAgICAgIHBvcHVwSW1hZ2VPcGVuLm9wZW4odGl0bGUsaW1hZ2UpO1xuICAgIH1cbiAgfSk7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufTtcblxuLy/RgdC+0LfQtNCw0L3QuNC1INGB0LXQutGG0LjQuCwg0L7RgtCy0LXRh9Cw0Y7RidC10Lkg0LfQsCDQtNC+0LHQsNCy0LvQtdC90LjQtSDQuNGB0YXQvtC00L3Ri9GFINC60LDRgNGC0L7Rh9C10Log0LIg0LrQvtC90YLQtdC50L3QtdGAXG5jb25zdCBjYXJkc1NlY3Rpb24gPSBuZXcgU2VjdGlvbih7XG4gIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgIGNhcmRzU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpO1xuICB9LFxufSxcbicuZWxlbWVudHNfX2xpc3QnXG4pO1xuXG4vL9C/0L7Qv9Cw0L8g0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuCDQvNC10YHRgtCwXG5jb25zdCBwb3B1cEVsZW1lbnRBZGQgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6ICcucG9wdXBfdHlwZV9lbGVtZW50LWFkZCcsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpdGVtKSA9PiB7XG4gICAgY2FyZHNTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XG4gICAgcG9wdXBFbGVtZW50QWRkLmNsb3NlKCk7XG4gIH1cbn1cbik7XG5wb3B1cEVsZW1lbnRBZGQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8g0JLQsNC70LjQtNCw0YbQuNGPINGE0L7RgNC8XG4vLyDRgdC+0LfQtNCw0YLRjCDQstCw0LvQuNC00LDRgtC+0YAg0YTQvtGA0Lwg0LzQtdGB0YLQsCDQuCDQv9GA0L7RhNC40LvRj1xuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQXR0cmlidXRlcywgZm9ybVByb2ZpbGUpO1xuY29uc3QgcGxhY2VGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkF0dHJpYnV0ZXMsIGZvcm1QbGFjZSk7XG5cbi8v0LLRi9C30LLQsNGC0Ywg0LzQtdGC0L7QtCBlbmFibGVWYWxpZGF0aW9uINC00LvRjyDQstCw0LvQuNC00LDRgtC+0YDQsCDQutCw0LbQtNC+0Lkg0YTQvtGA0LzRi1xucGxhY2VGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLy/QlNC+0LHQsNCy0LjRgtGMINGB0LvRg9GI0LDRgtC10LvQuCDQvdCwINC90LDQttCw0YLQuNC1INC60L3QvtC/0L7QuiDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QvtCyINC/0YDQvtGE0LjQu9GPINC4INC80LXRgdGC0LBcbnBvcHVwUHJvZmlsZU9wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IGluaXRpYWxQcm9maWxlSW5mbyA9IHByb2ZpbGVJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVGb3JtVmFsaWRhdG9yLnJlc2V0Rm9ybVZhbGlkYXRpb24oKTsvLyDRgdCx0YDQvtGB0LjRgtGMINCy0LDQu9C40LTQsNGG0LjRjiDRhNC+0YDQvNGLXG4gIHBvcHVwRWRpdFByb2ZpbGUuc2V0SW5wdXRWYWx1ZXMoaW5pdGlhbFByb2ZpbGVJbmZvKTtcbiAgcG9wdXBFZGl0UHJvZmlsZS5vcGVuKCk7XG59KTtcblxucG9wdXBQbGFjZU9wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgcGxhY2VGb3JtVmFsaWRhdG9yLnJlc2V0Rm9ybVZhbGlkYXRpb24oKTsvLyDRgdCx0YDQvtGB0LjRgtGMINCy0LDQu9C40LTQsNGG0LjRjiDRhNC+0YDQvNGLXG4gIHBvcHVwRWxlbWVudEFkZC5vcGVuKCk7XG59KTtcblxuLy/QntGC0YDQuNGB0L7QstC60LAg0LjRgdGF0L7QtNC90YvRhSDQutCw0YDRgtC+0YfQtdC6INC90LAg0YHRgtGA0LDQvdC40YbQtVxuY2FyZHNTZWN0aW9uLnJlbmRlcigpO1xuXG5cblxuXG4iXSwibmFtZXMiOlsiQ2FyZCIsImRhdGEiLCJ0ZW1wbGF0ZSIsImhhbmRsZUNhcmRFbGVtZW50Q2xpY2siLCJ0aGlzIiwiX3RpdGxlIiwibmFtZSIsIl9pbWFnZSIsImxpbmsiLCJfdGVtcGxhdGUiLCJfaGFuZGxlQ2FyZEVsZW1lbnRDbGljayIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZExpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfZWxlbWVudCIsInJlbW92ZSIsIl9uZXdFbGVtZW50TGlzdEl0ZW1JbWFnZSIsIl9jYXJkRGVsZXRlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsIl9nZXRUZW1wbGF0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInNyYyIsInRleHRDb250ZW50IiwiYWx0IiwiRm9ybVZhbGlkYXRvciIsImF0dHJpYnV0ZXMiLCJmb3JtRWxlbWVudCIsIl9hdHRyaWJ1dGVzIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiYWRkIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImZvckVhY2giLCJlbGVtZW50IiwiX2hpZGVJbnB1dEVycm9yIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwic29tZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfZGlzYWJsZUJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsIl9yZXNldElucHV0RXJyb3JzIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJldnQiLCJrZXkiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybVNlbGVjdG9yIiwiX2Zvcm1JbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwiUG9wdXBXaXRoSW1hZ2UiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cEltYWdlQ2FwdGlvbiIsInRpdGxlIiwiaW1hZ2UiLCJVc2VySW5mbyIsInByb2ZpbGVOYW1lU2VsZWN0b3IiLCJwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvciIsIl9wcm9maWxlTmFtZVNlbGVjdG9yIiwiX3Byb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yIiwiZGVzY3JpcHRpb24iLCJpbml0aWFsQ2FyZHMiLCJ2YWxpZGF0aW9uQXR0cmlidXRlcyIsImZvcm1TZWxlY3RvciIsInBvcHVwUHJvZmlsZU9wZW5CdXR0b24iLCJwb3B1cFBsYWNlT3BlbkJ1dHRvbiIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiZm9ybVByb2ZpbGUiLCJmb3JtUGxhY2UiLCJwcm9maWxlSW5mbyIsInBvcHVwRWRpdFByb2ZpbGUiLCJzZXRVc2VySW5mbyIsInNldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBJbWFnZU9wZW4iLCJjcmVhdGVDYXJkIiwib3BlbiIsImdlbmVyYXRlQ2FyZCIsImNhcmRzU2VjdGlvbiIsImFkZEl0ZW0iLCJwb3B1cEVsZW1lbnRBZGQiLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsInBsYWNlRm9ybVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJpbml0aWFsUHJvZmlsZUluZm8iLCJnZXRVc2VySW5mbyIsInJlc2V0Rm9ybVZhbGlkYXRpb24iLCJzZXRJbnB1dFZhbHVlcyIsInJlbmRlciJdLCJzb3VyY2VSb290IjoiIn0=