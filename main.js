(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){var r=e.data,o=e.template,i=e.handleCardElementClick,a=e.handleAddLike,u=e.handleRemoveLike,c=e.handleDeleteButtonClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._template=o,this._element=this._getTemplate(),this._handleCardElementClick=i,this._handleAddLike=a,this._handleRemoveLike=u,this._handleDeleteButtonClick=c,this._userId=n,this._newElementListItemImage=this._element.querySelector(".element__image"),this._cardLikeButton=this._element.querySelector(".element__like-button"),this._cardDeleteButton=this._element.querySelector(".element__delete-button"),this._likeCounter=this._element.querySelector(".element__like-label"),this.loadCard(r)}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._template).content.querySelector(".elements__list-item").cloneNode(!0)}},{key:"_setButtonState",value:function(){this._setDeleteButtonState(),this._setLikeButtonState()}},{key:"_setLikeButtonState",value:function(){this._setLikeByAuthorUser?this._cardLikeButton.classList.add("element__like-button_active"):this._cardLikeButton.classList.remove("element__like-button_active"),this._likeCounter.textContent=this._likes.length}},{key:"_setDeleteButtonState",value:function(){this._userId!==this._ownerId&&this._cardDeleteButton.remove()}},{key:"loadCard",value:function(e){var t=this;this._title=e.name,this._image=e.link,this.cardId=e._id,this._ownerId=e.owner._id,this._likes=e.likes,this._setLikeByAuthorUser=this._likes.some((function(e){return e._id===t._userId})),this._setButtonState()}},{key:"deleteCard",value:function(){this._element.remove(),this._element=null}},{key:"_setEventListeners",value:function(){var e=this;this._newElementListItemImage.addEventListener("click",(function(){e._handleCardElementClick(e._title,e._image)})),this._cardLikeButton.addEventListener("click",(function(){e._setLikeByAuthorUser?e._handleRemoveLike(e):e._handleAddLike(e)})),this._cardDeleteButton.addEventListener("click",(function(){e._handleDeleteButtonClick(e)}))}},{key:"generateCard",value:function(){return this._setEventListeners(),this._element.querySelector(".element__image").src=this._image,this._element.querySelector(".element__title").textContent=this._title,this._element.querySelector(".element__image").alt=this._title,this._element}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._attributes=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},t),this._formElement=o,this._inputList=Array.from(this._formElement.querySelectorAll(this._attributes.inputSelector)),this._buttonElement=this._formElement.querySelector(this._attributes.submitButtonSelector)}var t,i;return t=e,(i=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._attributes.inputErrorClass),n.textContent=t,n.classList.add(this._attributes.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._attributes.inputErrorClass),t.classList.remove(this._attributes.errorClass),t.textContent=""}},{key:"_resetInputErrors",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._disableButton():(this._buttonElement.classList.remove(this._attributes.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_disableButton",value:function(){this._buttonElement.classList.add(this._attributes.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"resetFormValidation",value:function(){this._resetInputErrors(),this._disableButton()}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&o(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"render",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close-button"))&&e.close()}))}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=h(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},p.apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._handleFormSubmit=r,t._formSelector=t._popup.querySelector(".edit-form"),t._inputList=t._formSelector.querySelectorAll(".edit-form__item"),t._submitButton=t._formSelector.querySelector(".edit-form__submit-button"),t._submitButtonText=t._submitButton.textContent,t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formInputValues={},this._inputList.forEach((function(t){e._formInputValues[t.name]=t.value})),this._formInputValues}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"showLoading",value:function(e){this._submitButton.textContent=e?"Сохранение...":this._submitButtonText}},{key:"close",value:function(){p(_(a.prototype),"close",this).call(this),this._formSelector.reset()}},{key:"setEventListeners",value:function(){var e=this;p(_(a.prototype),"setEventListeners",this).call(this),this._formSelector.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=S(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function S(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function w(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(r);if(o){var n=O(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._handleFormSubmit=r,t._formSelector=t._popup.querySelector(".edit-form"),t}return t=a,(n=[{key:"open",value:function(e){g(O(a.prototype),"open",this).call(this),this._card=e}},{key:"setEventListeners",value:function(){var e=this;g(O(a.prototype),"setEventListeners",this).call(this),this._formSelector.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._card)}))}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=P(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},C.apply(this,arguments)}function P(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}function B(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(r);if(o){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return B(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._popupImage=t._popup.querySelector(".popup__image"),t._popupImageCaption=t._popup.querySelector(".popup__image-caption"),t}return t=a,(n=[{key:"open",value:function(e,t){this._popupImage.src=t,this._popupImage.alt=e,this._popupImageCaption.textContent=e,C(R(a.prototype),"open",this).call(this)}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(t){var n=t.profileNameSelector,r=t.profileDescriptionSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileNameSelector=n,this._profileDescriptionSelector=r,this._avatarSelector=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._profileNameSelector.textContent,about:this._profileDescriptionSelector.textContent,avatar:this._avatarSelector.src}}},{key:"setUserInfo",value:function(e){this._profileNameSelector.textContent=e.name,this._profileDescriptionSelector.textContent=e.about}},{key:"setUserAvatar",value:function(e){this._avatarSelector.src=e.avatar,this._avatarSelector.alt=e.name}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._serverUrl=t.serverUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getUserInfoApi",value:function(){var e=this;return fetch("".concat(this._serverUrl,"/users/me"),{headers:this._headers}).then((function(t){return e._getResponseData(t)}))}},{key:"editPageUserInfo",value:function(e){var t=this;return fetch("".concat(this._serverUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._getResponseData(e)}))}},{key:"editUserAvatar",value:function(e){var t=this;return fetch("".concat(this._serverUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then((function(e){return t._getResponseData(e)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._serverUrl,"/cards"),{headers:this._headers}).then((function(t){return e._getResponseData(t)}))}},{key:"addCard",value:function(e){var t=this;return fetch("".concat(this._serverUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._getResponseData(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._serverUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._getResponseData(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch("".concat(this._serverUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return t._getResponseData(e)}))}},{key:"removeLike",value:function(e){var t=this;return fetch("".concat(this._serverUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return t._getResponseData(e)}))}}])&&T(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),x={formSelector:".edit-form",inputSelector:".edit-form__item",submitButtonSelector:".edit-form__submit-button",inactiveButtonClass:"edit-form__submit-button_disabled",inputErrorClass:"edit-form__item_state_error",errorClass:"edit-form__input-error_visible"},V=document.querySelector(".profile__edit-button"),F=document.querySelector(".profile__add-button"),N=document.querySelector(".profile__avatar-edit-button"),J=document.querySelector(".profile__name"),H=document.querySelector(".profile__description"),M=document.querySelector(".profile__avatar"),z=document.querySelector("#profile-edit-form"),$=(document.querySelector("#author-name"),document.querySelector("#author-description"),document.querySelector("#place-form")),G=document.querySelector("#avatar-edit-form");function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Q,W=new A({serverUrl:"https://mesto.nomoreparties.co/v1/cohort-48",headers:{authorization:"5d2947c9-bb9f-4c7f-aef0-c89bfe848fc0","Content-Type":"application/json"}});Promise.all([W.getUserInfoApi(),W.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];Q=o,X.setUserInfo(o),X.setUserAvatar(o),re.render(i)})).catch((function(e){console.log(e)}));var X=new U({profileNameSelector:J,profileDescriptionSelector:H,avatarSelector:M}),Y=new m({popupSelector:".popup_type_profile-editing",handleFormSubmit:function(e){Y.showLoading(!0),W.editPageUserInfo(e).then((function(e){X.setUserInfo(e),Y.close()})).catch((function(e){console.log(e)})).finally((function(){Y.showLoading(!1)}))}});Y.setEventListeners();var Z=new m({popupSelector:".popup_type_avatar-editing",handleFormSubmit:function(e){Z.showLoading(!0),W.editUserAvatar(e).then((function(e){X.setUserAvatar(e),Z.close()})).catch((function(e){console.log(e)})).finally((function(){Z.showLoading(!1)}))}});Z.setEventListeners();var ee=new D(".popup_type_image-opening");ee.setEventListeners();var te=new E({popupSelector:".popup_type_element-delete",handleFormSubmit:function(e){W.deleteCard(e.cardId).then((function(){e.deleteCard(),te.close()})).catch((function(e){console.log(e)}))}});te.setEventListeners();var ne=function(e){return new t({data:e,template:"#template-for-element",handleCardElementClick:function(e,t){ee.open(e,t)},handleAddLike:function(e){W.addLike(e.cardId).then((function(t){e.loadCard(t)})).catch((function(e){console.log(e)}))},handleRemoveLike:function(e){W.removeLike(e.cardId).then((function(t){e.loadCard(t)})).catch((function(e){console.log(e)}))},handleDeleteButtonClick:function(e){te.open(e)}},Q._id).generateCard()},re=new u({renderer:function(e){re.addItem(ne(e))}},".elements__list"),oe=new m({popupSelector:".popup_type_element-add",handleFormSubmit:function(e){oe.showLoading(!0),W.addCard(e).then((function(e){re.addItem(ne(e)),oe.close()})).catch((function(e){console.log(e)})).finally((function(){oe.showLoading(!1)}))}});oe.setEventListeners();var ie=new i(x,z),ae=new i(x,$),ue=new i(x,G);ae.enableValidation(),ie.enableValidation(),ue.enableValidation(),V.addEventListener("click",(function(){var e=X.getUserInfo();ie.resetFormValidation(),Y.setInputValues(e),Y.open()})),N.addEventListener("click",(function(){var e=X.getUserInfo();ue.resetFormValidation(),Z.setInputValues(e),Z.open()})),F.addEventListener("click",(function(){ae.resetFormValidation(),oe.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LHNCQUNuQlIsR0FBZ0JMLE1BQ2pCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIHRlbXBsYXRlLCBoYW5kbGVDYXJkRWxlbWVudENsaWNrLCBoYW5kbGVBZGRMaWtlLCBoYW5kbGVSZW1vdmVMaWtlLCBoYW5kbGVEZWxldGVCdXR0b25DbGljayB9LCB1c2VySWQpIHtcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRFbGVtZW50Q2xpY2sgPSBoYW5kbGVDYXJkRWxlbWVudENsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUFkZExpa2UgPSBoYW5kbGVBZGRMaWtlO1xuICAgIHRoaXMuX2hhbmRsZVJlbW92ZUxpa2UgPSBoYW5kbGVSZW1vdmVMaWtlO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrID0gaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2s7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICAgIHRoaXMuX25ld0VsZW1lbnRMaXN0SXRlbUltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKTtcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UtYnV0dG9uJyk7XG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2RlbGV0ZS1idXR0b24nKTtcbiAgICB0aGlzLl9saWtlQ291bnRlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UtbGFiZWwnKTtcblxuICAgIHRoaXMubG9hZENhcmQoZGF0YSk7XG4gIH1cbiAgLy/QvdCw0LHQvtGAINGD0YHQu9C+0LLQvdC+INC/0YDQuNCy0LDRgtC90YvRhSDQvNC10YLQvtC00L7QsiDQutC70LDRgdGB0LAgQ2FyZFxuXG4gIC8v0LzQtdGC0L7QtCDQv9C+0LvRg9GH0LXQvdC40Y8g0YjQsNCx0LvQvtC90LAg0LrQsNGA0YLQvtGH0LrQuCDQv9GD0YLQtdC8INC60LvQvtC90LjRgNC+0LLQsNC90LjRj1xuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZSlcbiAgICAgIC5jb250ZW50XG4gICAgICAucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19saXN0LWl0ZW0nKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIC8v0J3QsNGB0YLRgNC+0LnQutCwINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0Y3Qu9C10LzQtdC90YLQvtCyINC60L7RgNC30LjQvdGLINC4INC70LDQudC60LAg0L3QsCDQutCw0YDRgtC+0YfQutC1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQuCDRgdGC0L7RgNC+0L3QvdC40YUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C10LlcbiAgX3NldEJ1dHRvblN0YXRlKCkge1xuICAgIHRoaXMuX3NldERlbGV0ZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5fc2V0TGlrZUJ1dHRvblN0YXRlKCk7XG4gIH1cblxuICAvL9Cd0LDRgdGC0YDQvtC50LrQsCDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC70LDQudC60LAgKNCw0LrRgtC40LLQvdGL0Lkv0L3QtdCw0LrRgtC40LLQvdC+0LUg0YHQvtGB0YLQvtGP0L3QuNC1LCDRgdGH0LXRgtGH0LjQuiDQu9Cw0LnQutC+0LIpXG4gIF9zZXRMaWtlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX3NldExpa2VCeUF1dGhvclVzZXIpIHtcbiAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdlbGVtZW50X19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcbiAgICB9XG4gICAgdGhpcy5fbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG4gIH1cbiAvL9Cd0LDRgdGC0YDQvtC50LrQsCDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC60L7RgNC30LjQvdGLINGD0LTQsNC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuCAo0LTQu9GPINC00YDRg9Cz0LjRhSDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQuSlcbiAgX3NldERlbGV0ZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl91c2VySWQgIT09IHRoaXMuX293bmVySWQpIHtcbiAgICAgIHRoaXMuX2NhcmREZWxldGVCdXR0b24ucmVtb3ZlKCk7XG4gICAgfVxuICB9XG5cbiAgLy/Qt9Cw0LPRgNGD0LfQutCwINC00LDQvdC90YvRhSDQutCw0YDRgtC+0YfQutC4ICjRgdCy0L7QudGB0YLQsilcbiAgbG9hZENhcmQoZGF0YSkge1xuICAgIHRoaXMuX3RpdGxlID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2ltYWdlID0gZGF0YS5saW5rO1xuICAgIHRoaXMuY2FyZElkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcblxuICAgIC8v0KPRgdC70L7QstC40LUg0L/RgNC4INC60L7RgtC+0YDQvtC8INGD0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdGC0YHRjyDQsNC60YLQuNCy0L3Ri9C5INC30L3QsNGH0L7QuiDQu9Cw0LnQutCwXG4gICAgLy8o0L/RgNC4INC90LDQu9C40YfQuNC4INGC0LXQutGD0YnQtdCz0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINCyINC80LDRgdGB0LjQstC1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5INC70LDQudC60L3Rg9Cy0YjQuNGFINC60LDRgNGC0L7Rh9C60YMg0LIg0YHQstC+0LnRgdGC0LLQtSDQutCw0YDRgtC+0YfQutC4IF9saWtlcylcbiAgICB0aGlzLl9zZXRMaWtlQnlBdXRob3JVc2VyID0gdGhpcy5fbGlrZXMuc29tZShhbnlVc2VyID0+IHtcbiAgICAgIHJldHVybiBhbnlVc2VyLl9pZCA9PT0gdGhpcy5fdXNlcklkO1xuICAgIH0pXG4gICAgdGhpcy5fc2V0QnV0dG9uU3RhdGUoKTtcbiAgfVxuXG4vLyDQvNC10YLQvtC0INGD0LTQsNC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuICBkZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gIH1cblxuICAvL9C80LXRgtC+0LQg0YPRgdGC0LDQvdC+0LLQutC4INGB0LvRg9GI0LDRgtC10LvQtdC5ICjQutC70LjQuiDQv9C+INC60LDRgNGC0LjQvdC60LUsINC70LDQudC60YMsINC60L3QvtC/0LrQtSDRg9C00LDQu9C10L3QuNGPKVxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbmV3RWxlbWVudExpc3RJdGVtSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkRWxlbWVudENsaWNrKHRoaXMuX3RpdGxlLCB0aGlzLl9pbWFnZSk7XG4gICAgfSk7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5fc2V0TGlrZUJ5QXV0aG9yVXNlcikge1xuICAgICAgICB0aGlzLl9oYW5kbGVSZW1vdmVMaWtlKHRoaXMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9oYW5kbGVBZGRMaWtlKHRoaXMpXG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrKHRoaXMpO1xuICAgIH0pO1xuICB9XG5cbiAgLy/Qv9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDRgdC+0LfQtNCw0L3QuNGPINC60LDRgNGC0L7Rh9C60LhcbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKS5zcmMgPSB0aGlzLl9pbWFnZTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190aXRsZScpLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKS5hbHQgPSB0aGlzLl90aXRsZTtcbiAgICAvLyDQktC10YDQvdGR0Lwg0Y3Qu9C10LzQtdC90YIg0L3QsNGA0YPQttGDXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZXMsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fYXR0cmlidXRlcyA9IHsgLi4uYXR0cmlidXRlcyB9O1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2F0dHJpYnV0ZXMuaW5wdXRTZWxlY3RvcikpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2F0dHJpYnV0ZXMuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgLy/QvdCw0LHQvtGAINGD0YHQu9C+0LLQvdC+INC/0YDQuNCy0LDRgtC90YvRhSDQvNC10YLQvtC00L7QsiDQutC70LDRgdGB0LAgRm9ybVZhbGlkYXRvclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fYXR0cmlidXRlcy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9hdHRyaWJ1dGVzLmVycm9yQ2xhc3MpO1xuICB9O1xuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fYXR0cmlidXRlcy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2F0dHJpYnV0ZXMuZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gIH07XG5cbiAgX3Jlc2V0SW5wdXRFcnJvcnMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGVsZW1lbnQpO1xuICAgIH0pO1xuICB9O1xuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9O1xuICB9O1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9O1xuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2F0dHJpYnV0ZXMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfTtcbiAgfTtcblxuICBfZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fYXR0cmlidXRlcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgfTtcblxuICByZXNldEZvcm1WYWxpZGF0aW9uKCkgeyAgLy/Qv9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDRgdCx0YDQvtGB0LAg0L7RiNC40LHQvtC6INGE0L7RgNC8INC4INGB0LHRgNC+0YHQsCDQsNC60YLQuNCy0L3QvtCz0L4g0YHQvtGB0YLQvtGP0L3QuNGPINC60L3QvtC/0LrQuFxuICAgIHRoaXMuX3Jlc2V0SW5wdXRFcnJvcnMoKTtcbiAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG4gIH07XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBlbmFibGVWYWxpZGF0aW9uKCkgeyAgLy/Qv9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDQstCw0LvQuNC00LDRhtC40Lgg0YTQvtGA0LxcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9O1xuXG59O1xuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH07XG5cbiAgYWRkSXRlbShpdGVtKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XG4gIH07XG5cbiAgcmVuZGVyKGl0ZW1zKSB7XG4gICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuXG4gICAgfSlcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTsgLy8g0LTQu9GPINC60L7QvdC60YDQtdGC0L3QvtCz0L4g0L/QvtC/0LDQv9CwXG4gIH1cbiAgLy/Rg9GB0LvQvtCy0L3QviDQv9GA0LjQstCw0YLQvdGL0Lkg0LzQtdGC0L7QtCDQt9Cw0LrRgNGL0YLQuNGPINC60LvQsNGB0YHQsCBQb3B1cCDQv9C+INC60LvQsNCy0LjRiNC1IEVzY1xuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG4gIC8v0L/Rg9Cx0LvQuNGH0L3Ri9C5INC80LXRgtC+0LQg0L7RgtC60YDRi9GC0LjRjyBwb3B1cFxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH07XG5cbiAgLy/Qv9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDQvtGC0LrRgNGL0YLQuNGPIHBvcHVwXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH07XG5cbiAgLy/Qv9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDRg9GB0YLQsNC90L7QstC60Lgg0YHQu9GD0YjQsNGC0LXQu9C10Lkg0L3QsCDQt9Cw0LrRgNGL0YLQuNC1INC/0L4g0LrRgNC10YHRgtC40LrRgyDQuCDQvtCy0LXRgNC70LXRjiDQtNC70Y8gcG9wdXBcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSB8fFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ1dHRvbicpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LWZvcm0nKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbCgnLmVkaXQtZm9ybV9faXRlbScpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1TZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcuZWRpdC1mb3JtX19zdWJtaXQtYnV0dG9uJyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcbiAgfVxuXG4gIC8v0YPRgdC70L7QstC90L4g0L/RgNC40LLQsNGC0L3Ri9C5INC80LXRgtC+0LQg0L/QvtC70YPRh9C10L3QuNC1INC30L3QsNGH0LXQvdC40Y8g0LjQvdC/0YPRgtC+0LIg0LIg0YTQvtGA0LzRgyDQv9C+0L/QsNC/0LAg0LrQu9Cw0YHRgdCwIFBvcHVwV2l0aEZvcm1cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2Zvcm1JbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIHRoaXMuX2Zvcm1JbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1JbnB1dFZhbHVlcztcbiAgfVxuXG4gIC8v0L/Rg9Cx0LvQuNGH0L3Ri9C5INC80LXRgtC+0LQg0YPRgdGC0LDQvdC+0LLQutC4INC40L3Qv9GD0YLQvtCyINC40Lcg0YTQvtGA0LzRi1xuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xuICAgIH0pO1xuICB9XG4gIC8v0L/Rg9Cx0LvQuNGH0L3Ri9C5INC80LXRgtC+0LQg0YPRgdGC0LDQvdC+0LLQutC4INGB0L7RgdGC0L7Rj9C90LjRjyDQutC90L7Qv9C60Lgg0L/RgNC4INC30LDQs9GA0YPQt9C60LUg0LTQsNC90L3Ri9GFINC90LAg0YHQtdGA0LLQtdGAXG4gIHNob3dMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQ7XG4gICAgfVxuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IucmVzZXQoKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KVxuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioe3BvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXR9KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmVkaXQtZm9ybScpO1xuICB9XG5cbiAgLy/Qv9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDQutC70LDRgdGB0LAgUG9wdXBXaXRoQ29uZmlybWF0aW9uINC00LvRjyDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QsFxuICAvLyDQuCDQvtC/0YDQtdC00LXQu9C10L3QuNGPINC+0LHRitC10LrRgtCwINC60LDRgNGC0L7Rh9C60LgsINC90LAg0LrQvtGC0L7RgNC+0Lkg0LHRg9C00YPRgiDRgdC+0LLQtdGA0YnQsNGC0Ywg0LTQtdC50YHRgtCy0LjQtVxuXG4gIG9wZW4oY2FyZCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9jYXJkID0gY2FyZDtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9jYXJkKTtcbiAgICB9KVxuICB9XG5cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XG4gICAgdGhpcy5fcG9wdXBJbWFnZUNhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlLWNhcHRpb24nKTtcbiAgfVxuXG4gIG9wZW4odGl0bGUsIGltYWdlKSB7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBpbWFnZTtcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IHRpdGxlO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBwcm9maWxlTmFtZVNlbGVjdG9yLCBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lU2VsZWN0b3IgPSBwcm9maWxlTmFtZVNlbGVjdG9yO1xuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yID0gcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3I7XG4gICAgdGhpcy5fYXZhdGFyU2VsZWN0b3IgPSBhdmF0YXJTZWxlY3RvcjtcbiAgfVxuXG4vLyDQstC+0LfQstGA0LDRgiDQtNCw0L3QvdGL0YUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINCyINCy0LjQtNC1INC+0LHRitC10LrRgtCwXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZVNlbGVjdG9yLnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yLnRleHRDb250ZW50LFxuICAgICAgYXZhdGFyOiB0aGlzLl9hdmF0YXJTZWxlY3Rvci5zcmMsXG4gICAgfTtcbiAgfVxuXG4gIC8v0LTQvtCx0LDQstC70LXQvdC40LUg0LTQsNC90L3Ri9GFINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQvdCwINGB0YLRgNCw0L3QuNGG0YNcbiAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lU2VsZWN0b3IudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IudGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xuICB9XG4vL9C00L7QsdCw0LLQu9C10L3QuNC1INCw0LLQsNGC0LDRgNCwINC90LAg0YHRgtGA0LDQvdC40YbRg1xuICBzZXRVc2VyQXZhdGFyKGRhdGEpIHtcbiAgICB0aGlzLl9hdmF0YXJTZWxlY3Rvci5zcmMgPSBkYXRhLmF2YXRhcjtcbiAgICB0aGlzLl9hdmF0YXJTZWxlY3Rvci5hbHQgPSBkYXRhLm5hbWU7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9zZXJ2ZXJVcmwgPSBvcHRpb25zLnNlcnZlclVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICB9XG4gIC8v0L/QvtC70YPRh9C40YLRjCDQvtGC0LLQtdGCINGBINGB0LXRgNCy0LXRgNCwXG4gIF9nZXRSZXNwb25zZURhdGEocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICAvL9CX0LDQs9GA0YPQt9C40YLRjCDQuNC90YTQvtGA0LzQsNGG0LjRjiDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUg0YEg0L3Rg9C20L3QvtCz0L4g0YHQtdGA0LLQtdGA0LBcbiAgZ2V0VXNlckluZm9BcGkoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3NlcnZlclVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XG4gIH1cblxuICAvL9Ce0YLRgNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCDQv9GA0L7RhNC40LvRjCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8gKNC40LzRjy/QvtC/0LjRgdCw0L3QuNC1KVxuICBlZGl0UGFnZVVzZXJJbmZvKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fc2VydmVyVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgYWJvdXQ6IGRhdGEuYWJvdXRcbiAgICAgIH0pXG4gICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XG4gIH1cbiAgLy/QntCx0L3QvtCy0LjRgtGMINCw0LLQsNGC0LDRgCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0L3QsCDRgdGC0YDQsNC90LjRhtC1XG4gIGVkaXRVc2VyQXZhdGFyKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fc2VydmVyVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGRhdGEuYXZhdGFyLFxuICAgICAgfSlcbiAgICB9KVxuICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKVxuICB9XG5cbiAgLy/Ql9Cw0LPRgNGD0LfQuNGC0Ywg0LjRgdGF0L7QtNC90YvQtSDQutCw0YDRgtC+0YfQutC4INGBINGB0LXRgNCy0LXRgNCwXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fc2VydmVyVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XG4gIH1cblxuICAvL9CU0L7QsdCw0LLQuNGC0Ywg0L3QvtCy0YPRjiDQutCw0YDRgtC+0YfQutGDXG4gIGFkZENhcmQoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9zZXJ2ZXJVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgIGxpbms6IGRhdGEubGlua1xuICAgICAgfSlcbiAgICB9KVxuICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcbiAgfVxuXG4gIC8v0KPQtNCw0LvQuNGC0Ywg0LrQsNGA0YLQvtGH0LrRg1xuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9zZXJ2ZXJVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xuICB9XG5cbiAgLy/Qn9C+0YHRgtCw0LLQuNGC0Ywg0LvQsNC50Log0LrQsNGA0YLQvtGH0LrQtVxuICBhZGRMaWtlKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9zZXJ2ZXJVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xuICB9XG5cbiAgLy/Qo9Cx0YDQsNGC0Ywg0LvQsNC50LpcbiAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fc2VydmVyVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcbiAgfVxufVxuXG5cbiIsImNvbnN0IHZhbGlkYXRpb25BdHRyaWJ1dGVzID0ge1xuICBmb3JtU2VsZWN0b3I6ICcuZWRpdC1mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5lZGl0LWZvcm1fX2l0ZW0nLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5lZGl0LWZvcm1fX3N1Ym1pdC1idXR0b24nLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnZWRpdC1mb3JtX19zdWJtaXQtYnV0dG9uX2Rpc2FibGVkJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAnZWRpdC1mb3JtX19pdGVtX3N0YXRlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ2VkaXQtZm9ybV9faW5wdXQtZXJyb3JfdmlzaWJsZSdcbn07XG5cbi8vINCf0L7Qu9GD0YfQuNGC0Ywg0LTQvtGB0YLRg9C/INC6IERPTS3RjdC70LXQvNC10L3RgtCw0Lxcbi8vINCf0L7Qu9GD0YfQuNGC0Ywg0LTQvtGB0YLRg9C/INC6INC60L3QvtC/0LplIGVkaXQg0LTQu9GPINC+0YLQutGA0YvRgtC40Y8g0L/QvtC/LdCw0L/QsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXG5jb25zdCBwb3B1cFByb2ZpbGVPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XG4vLyDQn9C+0LvRg9GH0LjRgtGMINC00L7RgdGC0YPQvyDQuiDQutC90L7Qv9C6ZSBhZGQg0LTQu9GPINC+0YLQutGA0YvRgtC40Y8g0L/QvtC/LdCw0L/QsCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60Lgg0YEg0LzQtdGB0YLQvtC8XG5jb25zdCBwb3B1cFBsYWNlT3BlbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XG4vLyDQn9C+0LvRg9GH0LjRgtGMINC00L7RgdGC0YPQvyDQuiDQutC90L7Qv9C6ZSBhdmF0YXJFZGl0QnV0dG9uINC00LvRjyDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qvy3QsNC/0LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQsNCy0LDRgtCw0YDQsFxuY29uc3QgcG9wdXBBdmF0YXJPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci1lZGl0LWJ1dHRvbicpO1xuXG4vLyDQn9C+0LvRg9GH0LjRgtGMINC00L7RgdGC0YPQvyDQuiDRjdC70LXQvNC10L3RgtCw0LwgcHJvZmlsZSDQtNC70Y8g0LfQsNC/0L7Qu9C90LXQvdC40Y8g0YTQvtGA0LzRiyBwb3B1cEVkaXRQcm9maWxcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25hbWUnKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19kZXNjcmlwdGlvbicpO1xuY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKTtcblxuLy8g0J/QvtC70YPRh9C40YLRjCDQtNC+0YHRgtGD0L8g0Log0YTQvtGA0LzQtSBwcm9maWxlLWVkaXQtZm9ybSDQtNC70Y8gcG9wdXBFZGl0UHJvZmlsZSDQuCDQtdC1INGN0LvQtdC80LXQvdGC0LDQvFxuY29uc3QgZm9ybVByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZmlsZS1lZGl0LWZvcm0nKTtcbmNvbnN0IGZvcm1Qcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhdXRob3ItbmFtZScpO1xuY29uc3QgZm9ybVByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhdXRob3ItZGVzY3JpcHRpb24nKTtcblxuLy8g0J/QvtC70YPRh9C40YLRjCDQtNC+0YHRgtGD0L8g0Log0YTQvtGA0LzQtSBwbGFjZS1mb3JtICDQtNC70Y8gcG9wdXBFbGVtZW50QWRkINC4INC10LUg0Y3Qu9C10LzQtdC90YLQsNC8XG5jb25zdCBmb3JtUGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGxhY2UtZm9ybScpO1xuXG4vLyDQn9C+0LvRg9GH0LjRgtGMINC00L7RgdGC0YPQvyDQuiDRhNC+0YDQvNC1IGF2YXRhci1mb3JtICDQtNC70Y8gcG9wdXBFZGl0QXZhdGFyINC4INC10LUg0Y3Qu9C10LzQtdC90YLQsNC8XG5jb25zdCBmb3JtQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2F2YXRhci1lZGl0LWZvcm0nKTtcblxuXG5leHBvcnQge1xuICB2YWxpZGF0aW9uQXR0cmlidXRlcyxcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcbiAgcHJvZmlsZUF2YXRhcixcbiAgZm9ybVByb2ZpbGVOYW1lLFxuICBmb3JtUHJvZmlsZURlc2NyaXB0aW9uLFxuICBmb3JtUHJvZmlsZSxcbiAgZm9ybVBsYWNlLFxuICBwb3B1cFByb2ZpbGVPcGVuQnV0dG9uLFxuICBwb3B1cFBsYWNlT3BlbkJ1dHRvbixcbiAgcG9wdXBBdmF0YXJPcGVuQnV0dG9uLFxuICBmb3JtQXZhdGFyXG59XG4iLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcblxuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XG5cbmltcG9ydCB7XG4gIHZhbGlkYXRpb25BdHRyaWJ1dGVzLFxuICBwcm9maWxlTmFtZSxcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxuICBwcm9maWxlQXZhdGFyLFxuICBmb3JtUHJvZmlsZU5hbWUsXG4gIGZvcm1Qcm9maWxlRGVzY3JpcHRpb24sXG4gIGZvcm1Qcm9maWxlLFxuICBmb3JtUGxhY2UsXG4gIGZvcm1BdmF0YXIsXG4gIHBvcHVwUHJvZmlsZU9wZW5CdXR0b24sXG4gIHBvcHVwUGxhY2VPcGVuQnV0dG9uLFxuICBwb3B1cEF2YXRhck9wZW5CdXR0b24sXG5cbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIHNlcnZlclVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDgnLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogJzVkMjk0N2M5LWJiOWYtNGM3Zi1hZWYwLWM4OWJmZTg0OGZjMCcsXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICB9XG59KTtcblxubGV0IHVzZXI7XG5cbi8vINC30LDQs9GA0YPQt9C60LAg0YEg0YHQtdGA0LLQtdGA0LAg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1INC4INC90LDRh9Cw0LvRjNC90YvRhSDQutCw0YDRgtC+0YfQtdC6XG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvQXBpKCksIGFwaS5nZXRJbml0aWFsQ2FyZHMoKV0pXG4gIC50aGVuKChbdXNlckluZm8sIGluaXRpYWxDYXJkc10pID0+IHtcbiAgICB1c2VyID0gdXNlckluZm87XG4gICAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8odXNlckluZm8pO1xuICAgIHByb2ZpbGVJbmZvLnNldFVzZXJBdmF0YXIodXNlckluZm8pO1xuICAgIGNhcmRzU2VjdGlvbi5yZW5kZXIoaW5pdGlhbENhcmRzKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9KTtcblxuLy/RgdC+0LfQtNCw0L3QuNC1INGN0LrQt9C10LzQv9C70Y/RgNCwINC60LvQsNGB0YHQsCDRgSDQuNC90YTQvtGA0LzQsNGG0LjQtdC5INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtSAo0LjQvNGPLCDQvtC/0LjRgdCw0L3QuNC1LCDQsNCy0LDRgtCw0YApXG5jb25zdCBwcm9maWxlSW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIHByb2ZpbGVOYW1lU2VsZWN0b3I6IHByb2ZpbGVOYW1lLFxuICBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvcjogcHJvZmlsZURlc2NyaXB0aW9uLFxuICBhdmF0YXJTZWxlY3RvcjogcHJvZmlsZUF2YXRhcixcbn1cbik7XG5cbi8v0J/QvtC/0LDQvyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfcHJvZmlsZS1lZGl0aW5nJyxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICBwb3B1cEVkaXRQcm9maWxlLnNob3dMb2FkaW5nKHRydWUpO1xuICAgIGFwaS5lZGl0UGFnZVVzZXJJbmZvKGRhdGEpXG4gICAgICAudGhlbigodXNlckRhdGEpID0+IHtcbiAgICAgICAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xuICAgICAgICBwb3B1cEVkaXRQcm9maWxlLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHBvcHVwRWRpdFByb2ZpbGUuc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgICAgfSk7XG4gIH1cbn1cbik7XG5cbnBvcHVwRWRpdFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy/Qn9C+0L/QsNC/INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LDQstCw0LLRgtCw0YDQsFxuY29uc3QgcG9wdXBFZGl0QXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfYXZhdGFyLWVkaXRpbmcnLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgIHBvcHVwRWRpdEF2YXRhci5zaG93TG9hZGluZyh0cnVlKTtcbiAgICBhcGkuZWRpdFVzZXJBdmF0YXIoZGF0YSlcbiAgICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgICBwcm9maWxlSW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhKTtcbiAgICAgICAgcG9wdXBFZGl0QXZhdGFyLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHBvcHVwRWRpdEF2YXRhci5zaG93TG9hZGluZyhmYWxzZSk7XG4gICAgICB9KTtcbiAgfVxufVxuKTtcblxucG9wdXBFZGl0QXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8v0J/QvtC/0LDQvyDQv9GA0L7RgdC80L7RgtGA0LAg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XG5jb25zdCBwb3B1cEltYWdlT3BlbiA9IG5ldyBQb3B1cFdpdGhJbWFnZShcbiAgJy5wb3B1cF90eXBlX2ltYWdlLW9wZW5pbmcnXG4pO1xucG9wdXBJbWFnZU9wZW4uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy/Qn9C+0L/QsNC/INC/0L7QtNGC0LLQtdGA0LbQtNC10L3QuNGPINGD0LTQsNC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuY29uc3QgcG9wdXBEZWxldGVDYXJkID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbih7XG4gIHBvcHVwU2VsZWN0b3I6ICcucG9wdXBfdHlwZV9lbGVtZW50LWRlbGV0ZScsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChjYXJkKSA9PiB7XG4gICAgYXBpLmRlbGV0ZUNhcmQoY2FyZC5jYXJkSWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQuZGVsZXRlQ2FyZCgpO1xuICAgICAgICBwb3B1cERlbGV0ZUNhcmQuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSlcbiAgfVxufSk7XG5cbnBvcHVwRGVsZXRlQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL9Ch0L7Qt9C00LDQvdC40LUg0LrQsNGA0YLQvtGH0LrQuFxuY29uc3QgY3JlYXRlQ2FyZCA9IChpdGVtKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XG4gICAgZGF0YTogaXRlbSxcbiAgICB0ZW1wbGF0ZTogJyN0ZW1wbGF0ZS1mb3ItZWxlbWVudCcsXG4gICAgaGFuZGxlQ2FyZEVsZW1lbnRDbGljazogKHRpdGxlLCBpbWFnZSkgPT4ge1xuICAgICAgcG9wdXBJbWFnZU9wZW4ub3Blbih0aXRsZSwgaW1hZ2UpO1xuICAgIH0sXG4gICAgaGFuZGxlQWRkTGlrZTogKGNhcmQpID0+IHtcbiAgICAgIGFwaS5hZGRMaWtlKGNhcmQuY2FyZElkKVxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgIGNhcmQubG9hZENhcmQoZGF0YSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSlcbiAgICB9LFxuICAgIGhhbmRsZVJlbW92ZUxpa2U6IChjYXJkKSA9PiB7XG4gICAgICBhcGkucmVtb3ZlTGlrZShjYXJkLmNhcmRJZClcbiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICBjYXJkLmxvYWRDYXJkKGRhdGEpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pXG4gICAgfSxcbiAgICBoYW5kbGVEZWxldGVCdXR0b25DbGljazogKGNhcmQpID0+IHtcbiAgICAgIHBvcHVwRGVsZXRlQ2FyZC5vcGVuKGNhcmQpXG4gICAgfSxcbiAgfSwgdXNlci5faWQpO1xuXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufTtcblxuLy/RgdC+0LfQtNCw0L3QuNC1INGN0LrQt9C10LzQv9C70Y/RgNCwINGB0LXQutGG0LjQuCwg0L7RgtCy0LXRh9Cw0Y7RidC10Lkg0LfQsCDQtNC+0LHQsNCy0LvQtdC90LjQtSDQuNGB0YXQvtC00L3Ri9GFINC60LDRgNGC0L7Rh9C10Log0LIg0LrQvtC90YLQtdC50L3QtdGAXG5jb25zdCBjYXJkc1NlY3Rpb24gPSBuZXcgU2VjdGlvbih7XG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgIGNhcmRzU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpO1xuICB9LFxufSxcbiAgJy5lbGVtZW50c19fbGlzdCdcbik7XG5cbi8v0L/QvtC/0LDQvyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4INC80LXRgdGC0LBcbmNvbnN0IHBvcHVwRWxlbWVudEFkZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cF90eXBlX2VsZW1lbnQtYWRkJyxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGl0ZW0pID0+IHtcbiAgICBwb3B1cEVsZW1lbnRBZGQuc2hvd0xvYWRpbmcodHJ1ZSk7XG4gICAgYXBpLmFkZENhcmQoaXRlbSlcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGNhcmRzU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoZGF0YSkpO1xuICAgICAgICBwb3B1cEVsZW1lbnRBZGQuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcG9wdXBFbGVtZW50QWRkLnNob3dMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pO1xuICB9XG59XG4pO1xucG9wdXBFbGVtZW50QWRkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vINCS0LDQu9C40LTQsNGG0LjRjyDRhNC+0YDQvFxuLy8g0YHQvtC30LTQsNGC0Ywg0LLQsNC70LjQtNCw0YLQvtGAINGE0L7RgNC8INC80LXRgdGC0LAsINC/0YDQvtGE0LjQu9GPINC4INCw0LLQsNGC0LDRgNCwXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25BdHRyaWJ1dGVzLCBmb3JtUHJvZmlsZSk7XG5jb25zdCBwbGFjZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQXR0cmlidXRlcywgZm9ybVBsYWNlKTtcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQXR0cmlidXRlcywgZm9ybUF2YXRhcik7XG5cbi8v0LLRi9C30LLQsNGC0Ywg0LzQtdGC0L7QtCBlbmFibGVWYWxpZGF0aW9uINC00LvRjyDQstCw0LvQuNC00LDRgtC+0YDQsCDQutCw0LbQtNC+0Lkg0YTQvtGA0LzRi1xucGxhY2VGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vL9CU0L7QsdCw0LLQuNGC0Ywg0YHQu9GD0YjQsNGC0LXQu9C4INC90LAg0L3QsNC20LDRgtC40LUg0LrQvdC+0L/QvtC6INC+0YLQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9C+0LIg0L/RgNC+0YTQuNC70Y8sINC80LXRgdGC0LAsINCw0LLQsNGC0LDRgNCwXG5wb3B1cFByb2ZpbGVPcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICBjb25zdCBpbml0aWFsUHJvZmlsZUluZm8gPSBwcm9maWxlSW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlRm9ybVZhbGlkYXRvci5yZXNldEZvcm1WYWxpZGF0aW9uKCk7Ly8g0YHQsdGA0L7RgdC40YLRjCDQstCw0LvQuNC00LDRhtC40Y4g0YTQvtGA0LzRi1xuICBwb3B1cEVkaXRQcm9maWxlLnNldElucHV0VmFsdWVzKGluaXRpYWxQcm9maWxlSW5mbyk7XG4gIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xufSk7XG5cbnBvcHVwQXZhdGFyT3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgaW5pdGlhbFByb2ZpbGVBdmF0YXIgPSBwcm9maWxlSW5mby5nZXRVc2VySW5mbygpO1xuICBhdmF0YXJGb3JtVmFsaWRhdG9yLnJlc2V0Rm9ybVZhbGlkYXRpb24oKTsvLyDRgdCx0YDQvtGB0LjRgtGMINCy0LDQu9C40LTQsNGG0LjRjiDRhNC+0YDQvNGLXG4gIHBvcHVwRWRpdEF2YXRhci5zZXRJbnB1dFZhbHVlcyhpbml0aWFsUHJvZmlsZUF2YXRhcik7XG4gIHBvcHVwRWRpdEF2YXRhci5vcGVuKCk7XG59KTtcblxucG9wdXBQbGFjZU9wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgcGxhY2VGb3JtVmFsaWRhdG9yLnJlc2V0Rm9ybVZhbGlkYXRpb24oKTsvLyDRgdCx0YDQvtGB0LjRgtGMINCy0LDQu9C40LTQsNGG0LjRjiDRhNC+0YDQvNGLXG4gIHBvcHVwRWxlbWVudEFkZC5vcGVuKCk7XG59KTtcblxuXG5cblxuXG4iXSwibmFtZXMiOlsiQ2FyZCIsInVzZXJJZCIsImRhdGEiLCJ0ZW1wbGF0ZSIsImhhbmRsZUNhcmRFbGVtZW50Q2xpY2siLCJoYW5kbGVBZGRMaWtlIiwiaGFuZGxlUmVtb3ZlTGlrZSIsImhhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrIiwidGhpcyIsIl90ZW1wbGF0ZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2hhbmRsZUNhcmRFbGVtZW50Q2xpY2siLCJfaGFuZGxlQWRkTGlrZSIsIl9oYW5kbGVSZW1vdmVMaWtlIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrIiwiX3VzZXJJZCIsIl9uZXdFbGVtZW50TGlzdEl0ZW1JbWFnZSIsInF1ZXJ5U2VsZWN0b3IiLCJfY2FyZExpa2VCdXR0b24iLCJfY2FyZERlbGV0ZUJ1dHRvbiIsIl9saWtlQ291bnRlciIsImxvYWRDYXJkIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldERlbGV0ZUJ1dHRvblN0YXRlIiwiX3NldExpa2VCdXR0b25TdGF0ZSIsIl9zZXRMaWtlQnlBdXRob3JVc2VyIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwidGV4dENvbnRlbnQiLCJfbGlrZXMiLCJsZW5ndGgiLCJfb3duZXJJZCIsIl90aXRsZSIsIm5hbWUiLCJfaW1hZ2UiLCJsaW5rIiwiY2FyZElkIiwiX2lkIiwib3duZXIiLCJsaWtlcyIsInNvbWUiLCJhbnlVc2VyIiwiX3NldEJ1dHRvblN0YXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9zZXRFdmVudExpc3RlbmVycyIsInNyYyIsImFsdCIsIkZvcm1WYWxpZGF0b3IiLCJhdHRyaWJ1dGVzIiwiZm9ybUVsZW1lbnQiLCJfYXR0cmlidXRlcyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJmb3JFYWNoIiwiZWxlbWVudCIsIl9oaWRlSW5wdXRFcnJvciIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfZGlzYWJsZUJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsIl9yZXNldElucHV0RXJyb3JzIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJwcmVwZW5kIiwiaXRlbXMiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm1TZWxlY3RvciIsIl9zdWJtaXRCdXR0b24iLCJfc3VibWl0QnV0dG9uVGV4dCIsIl9mb3JtSW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwiaXNMb2FkaW5nIiwicmVzZXQiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImNhcmQiLCJfY2FyZCIsIlBvcHVwV2l0aEltYWdlIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBJbWFnZUNhcHRpb24iLCJ0aXRsZSIsImltYWdlIiwiVXNlckluZm8iLCJwcm9maWxlTmFtZVNlbGVjdG9yIiwicHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9wcm9maWxlTmFtZVNlbGVjdG9yIiwiX3Byb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yIiwiX2F2YXRhclNlbGVjdG9yIiwiYWJvdXQiLCJhdmF0YXIiLCJBcGkiLCJvcHRpb25zIiwiX3NlcnZlclVybCIsInNlcnZlclVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsInRoZW4iLCJfZ2V0UmVzcG9uc2VEYXRhIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ2YWxpZGF0aW9uQXR0cmlidXRlcyIsImZvcm1TZWxlY3RvciIsInBvcHVwUHJvZmlsZU9wZW5CdXR0b24iLCJwb3B1cFBsYWNlT3BlbkJ1dHRvbiIsInBvcHVwQXZhdGFyT3BlbkJ1dHRvbiIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicHJvZmlsZUF2YXRhciIsImZvcm1Qcm9maWxlIiwiZm9ybVBsYWNlIiwiZm9ybUF2YXRhciIsInVzZXIiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiYWxsIiwiZ2V0VXNlckluZm9BcGkiLCJnZXRJbml0aWFsQ2FyZHMiLCJ1c2VySW5mbyIsImluaXRpYWxDYXJkcyIsInByb2ZpbGVJbmZvIiwic2V0VXNlckluZm8iLCJzZXRVc2VyQXZhdGFyIiwiY2FyZHNTZWN0aW9uIiwicmVuZGVyIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwicG9wdXBFZGl0UHJvZmlsZSIsInNob3dMb2FkaW5nIiwiZWRpdFBhZ2VVc2VySW5mbyIsInVzZXJEYXRhIiwiZmluYWxseSIsInNldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBFZGl0QXZhdGFyIiwiZWRpdFVzZXJBdmF0YXIiLCJwb3B1cEltYWdlT3BlbiIsInBvcHVwRGVsZXRlQ2FyZCIsImRlbGV0ZUNhcmQiLCJjcmVhdGVDYXJkIiwib3BlbiIsImFkZExpa2UiLCJyZW1vdmVMaWtlIiwiZ2VuZXJhdGVDYXJkIiwiYWRkSXRlbSIsInBvcHVwRWxlbWVudEFkZCIsImFkZENhcmQiLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsInBsYWNlRm9ybVZhbGlkYXRvciIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiaW5pdGlhbFByb2ZpbGVJbmZvIiwiZ2V0VXNlckluZm8iLCJyZXNldEZvcm1WYWxpZGF0aW9uIiwic2V0SW5wdXRWYWx1ZXMiLCJpbml0aWFsUHJvZmlsZUF2YXRhciJdLCJzb3VyY2VSb290IjoiIn0=